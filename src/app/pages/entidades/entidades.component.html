<ng-template #customLoadingTemplate>
    <div class="custom-class">
        <h3>Cargando...</h3>
    </div>
</ng-template>
<!-- <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" [template]="customLoadingTemplate"></ngx-loading> -->
<ngx-loading [show]="loading" [config]="{
    animationType: ngxLoadingAnimationTypes.circleSwish,
    primaryColour: primaryColour,
    backdropBorderRadius: '3px'
  }" [template]="loadingTemplate">
</ngx-loading>

<div class="row animated fadeIn">
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <!-- #region grilla registro entidades -->
                <div class="row float-right" *ngIf="displayListEntidad">
                    <button type="button" (click)="showPanel('CA')" class="btn btn-primary m-b-0 button-tabla">
                        Crear nueva entidad
                    </button>
                </div>
                <br />

                <h4 class="card-title">Registro entidades</h4>
                <div *ngIf="displayListEntidad">
                    <dx-data-grid id="gridEntidades" [dataSource]="listaEntidades" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="false" [columnAutoWidth]="true" keyExpr="EntidadId">
                        <dxo-export [enabled]="true" fileName="Entidades Registradas en el Sistema">
                        </dxo-export>
                        <dxo-filter-row [visible]="true"> </dxo-filter-row>
                        <dxo-header-filter [visible]="true"> </dxo-header-filter>
                        <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                        </dxo-grouping>
                        <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                        </dxo-group-panel>
                        <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>
                        <dxo-remote-operations [sorting]="true" [paging]="true"></dxo-remote-operations>
                        <dxo-state-storing [enabled]="true" type="localStorageEntidades" storageKey="storage">
                        </dxo-state-storing>
                        <dxo-column-chooser [enabled]="true" mode="select"></dxo-column-chooser>
                        <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center">
                        </dxi-column>
                        <dxi-column dataField="EntidadId" caption="Id"> </dxi-column>
                        <dxi-column dataField="EntidadNombre" caption="Nombre"></dxi-column>
                        <dxi-column dataField="EstadoNombre" caption="Estado"></dxi-column>
                        <dxi-column dataField="EntidadNaturaleza" caption="Naturaleza"></dxi-column>
                        <dxi-column dataField="EntidadPrimerNombreResponsable" caption="Nombre Responsable">
                        </dxi-column>
                        <dxi-column dataField="EntidadSegundoApellidoResponsable" caption="Apellido Responsable">
                        </dxi-column>
                        <dxi-column dataField="EntidadTelefonoResponsable" caption="Telefono Responsable"></dxi-column>
                        <dxi-column dataField="EntidadEmailResponsable" caption="Correo Responsable"></dxi-column>
                        <dxi-column dataField="EntidadDireccion" caption="Dirección"></dxi-column>
                        <dxi-column dataField="AgenteSegundoApellido" caption="Segundo Apellido"></dxi-column>
                        <dxi-column dataField="EntidadNombreContacto" caption="Nombre Contacto"></dxi-column>
                        <dxi-column dataField="EntidadApellidoContacto" caption="Apellido Contacto"></dxi-column>
                        <div *dxTemplate="let d of 'accionCellTemplate'">
                            <div class="internal-grid-container">
                                <div>
                                    <button type="button" matTooltip="Editar" (click)="showPanel('U', d.data.EntidadId)" class="btn btn-success waves-effect waves-light m-r-10">
                                        <i class="fa fa-edit"></i>
                                    </button>
                                    <button type="button" matTooltip="Borrar" (click)="borrarEntidad(d.data.EntidadId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                        <i class="fa fa-remove"></i>
                                    </button>
                                    <button type="button" matTooltip="Aprobar" (click)="aprobarEntidad(d.data.EntidadId)" class="btn btn-facebook waves-effect waves-light m-r-10">
                                        <i class="fa fa-check"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <dxo-summary>
                            <dxi-total-item column="AgenteId" summaryType="count" displayFormat="Cantidad: {0}">
                            </dxi-total-item>
                        </dxo-summary>
                        <dxo-paging [pageSize]="10"></dxo-paging>
                        <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                        </dxo-pager>
                    </dx-data-grid>
                </div>
                <!-- #endregion -->
            </div>
        </div>
    </div>
</div>

<div class="row animated fadeIn">
    <div class="col-12">
        <div class="card"></div>
        <div *ngIf="displayCrearEntidad">
            <div class="row p-t-20">
                <div class="col-md-3"></div>
                <div class="col-md-2">
                    <button type="button" class="btn waves-effect waves-light btn-primary" (click)="showPanel('V', '2')">
                        <i class="fa fa-arrow-left"></i>
                        Regresar al Listado
                    </button>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-2">
                    <button type="button" (click)="showPanel('C')" class="btn btn-primary m-b-0 button-tabla">
                        <i class="fa fa-plus"></i>
                        Crear nueva entidad
                    </button>
                </div>
                <div class="col-md-4"></div>
            </div>
            <div class="activity-box m-t-30">
                <div class="date-devider"></div>
            </div>
            <div class="row p-t-20">
                <div class="col-md-10">
                    <h4 class="card-title">
                        {{ entidad.EntidadNombre }}
                    </h4>
                </div>
            </div>

            <div class="card">
                <div id="demo-wizard" class="wizard" style="width: 100%">
                    <ul class="steps">
                        <li data-target="#step1" [ngClass]="EstiloStep1" style="width: 25%" (click)="showPanel2('R')">
                            <span class="badge">1</span> Registro
                            <span class="chevron"></span>
                        </li>
                        <li data-target="#step2" [ngClass]="EstiloStep2" style="width: 25%" (click)="showPanel2('P')">
                            <span class="badge">2</span> Actividades Desarrolladas por la Entidad
                            <span class="chevron"></span>
                        </li>
                        <li *ngIf="displaySala" data-target="#step3" [ngClass]="EstiloStep3" style="width: 25%" (click)="showPanel2('O')">
                            <span class="badge">3</span> {{ tituloVariable }}
                            <span class="chevron"></span>
                        </li>
                    </ul>
                </div>
                <div class="step-content" *ngIf="registro">
                    <!-- #region formulario Entidades -->
                    <div class="step-pane active" id="step1">
                        <div class="card-body wizard-content">
                            <form ngNativeValidate #formCc="ngForm" (ngSubmit)="onSubmit(formCc.valid, 'P')" class="form p-t-20">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card card-body">
                                            <h3 class="box-title m-b-0">Imagen Entidad</h3>
                                            <p class="text-muted m-b-30 font-13">
                                                Extensiones Permitidas:.jpg, .jpeg, .gif, .png
                                            </p>
                                            <p class="text-muted m-b-30 font-13">
                                                Tamaño maximo: 4 Mb
                                            </p>
                                            <div class="row">
                                                <div class="col-sm-12 col-xs-12">
                                                    <form>
                                                        <img width="520px" height="213px" src="{{ urlImagen }}" />
                                                        <div class="form-group">
                                                            <label for="exampleInputuname">Fotografia</label>
                                                            <div class="input-group">
                                                                <dx-file-uploader #fileUploader uploadUrl="{{ url }}" [multiple]="false" accept="*" [(value)]="value" uploadMode="useButtons" labelText="o arrastrar imagen" selectButtonText="Seleccionar archivo" (onValueChanged)="addIdParameter($event)" uploadButtonText="Subir"
                                                                    readyToUploadMessage="Listo para subir" uploadFailedMessage="Ocurrio un error al subir el archivo" (onUploaded)="subidaCompleta($event)" [allowedFileExtensions]="['.jpg','.jpeg','.gif','.png']"
                                                                    [maxFileSize]="4000000">
                                                                </dx-file-uploader>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card card-body">
                                            <h3 class="box-title m-b-0">Descripción Entidad</h3>
                                            <p class="text-muted m-b-30 font-13">
                                                Describa su Entidad.
                                            </p>

                                            <div class="row">
                                                <div class="col-sm-12 col-xs-12">
                                                    <div class="form-group">
                                                        <label>Descripción Entidad</label>

                                                        <textarea class="form-control" rows="10" name="EntidadDescripcion" [(ngModel)]="entidad.EntidadDescripcion" required>
                                                        </textarea>
                                                        <div style="color: red" *ngIf="entidad.EntidadDescripcion === ''">
                                                            <strong> * </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputuname">Área </label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <i class="ti-agenda"></i>
                                                </div>
                                                <select name="AreaId" class="form-control" (change)="cargarTiposOcupacion()" [(ngModel)]="entidad.AreaId" required>
                                                    <option *ngFor="let item of areaLista"
                                                        [ngValue]="item.idValorReferencia">
                                                        {{ item.nombre }}
                                                    </option>
                                                </select>

                                                <div style="color: red" *ngIf="entidad.AreaId === null">
                                                    <strong>&nbsp; * </strong>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="exampleInputuname">Campo de acción principal</label>
                                                <dx-list #list [searchEnabled]="true" searchExpr="text" searchMode="contains" [dataSource]="tasks" [(selectedItems)]="selectedItemsAreaPrincipal" [selectionMode]="'multiple'" [selectAllMode]="'page'" [showSelectionControls]="true" [selectedItemKeys]="datos">
                                                </dx-list>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputuname">Otros Campos de Acción</label>
                                            <dx-data-grid id="gridOtrasOcupaciones" [rowAlternationEnabled]="true" title="Otras Ocupaciones" keyExpr="EntidadOcupacionId" [dataSource]="dataSourceOtrasOcupaciones" [showBorders]="true" (onEditorPreparing)="onEditorPreparingOtrasOcupaciones($event)">
                                                <dxo-editing [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="true" [useIcons]="true">
                                                </dxo-editing>
                                                <dxi-column dataField="OtrasAreasId" caption="Areas" [setCellValue]="setOtrasAreasValue">
                                                    <dxo-lookup [dataSource]="otrasAreas" valueExpr="OtrasAreasId" displayExpr="nombre">
                                                    </dxo-lookup>
                                                </dxi-column>
                                                <dxi-column dataField="TipoCampodeAccionId" caption="Campo Acción">
                                                    <dxo-lookup [dataSource]="getFilteredOcupaciones" valueExpr="TipoCampodeAccionId" displayExpr="nombre">
                                                    </dxo-lookup>
                                                </dxi-column>
                                            </dx-data-grid>
                                        </div>
                                    </div>
                                </div>
                                <!-- campos nuevos -->
                                <div class="row">

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputuname">Cuenta con infraestructura teatral</label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <i class="ti-agenda"></i>
                                                </div>
                                                <select name="EntidadInfraestructuraCultural" class="form-control" [(ngModel)]="entidad.EntidadInfraestructuraCultural" #EntidadInfraestructuraCulturalControl="ngModel" required>
                                                    <option *ngFor="let item of listaEntidadInfraestructuraCultural"
                                                        [ngValue]="item.nombre">
                                                        {{ item.nombre }}
                                                    </option>
                                                </select>
                                                <ng-container *ngIf="!EntidadInfraestructuraCulturalControl.valid && EntidadInfraestructuraCulturalControl.touched">
                                                    <div style="color: red" *ngIf="EntidadInfraestructuraCulturalControl.errors.required" class="error-message">
                                                        <strong>&nbsp; * </strong>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputuname">Cantidad de personas con que cuenta la
                                                entidad</label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <i class="ti-user"></i>
                                                </div>
                                                <input name="EntidadCantidadPersonas" type="text" id="EntidadCantidadPersonas" class="form-control" placeholder="Cantidad de personas" [(ngModel)]="entidad.EntidadCantidadPersonas" minlength="1" maxlength="100" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;"
                                                    required #EntidadCantidadPersonasControl="ngModel" />
                                                <ng-container *ngIf="!EntidadCantidadPersonasControl.valid && EntidadCantidadPersonasControl.touched">
                                                    <div style="color: red" *ngIf="EntidadCantidadPersonasControl.errors.required" class="error-message">
                                                        <strong>&nbsp; * </strong>
                                                    </div>
                                                    <div style="color: red" *ngIf="EntidadCantidadPersonasControl.errors.minlength" class="error-message">
                                                        <strong>&nbsp; * </strong>
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Datos Basicos</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-12 col-xs-12">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Nombre Entidad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadNombre" type="text" class="form-control" placeholder="Nombre Entidad" [(ngModel)]="entidad.EntidadNombre" required />
                                                            <div style="color: red" *ngIf="entidad.EntidadNombre === ''">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Tipo Entidad </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-agenda"></i>
                                                            </div>
                                                            <select name="TipoEntidad" class="form-control" [(ngModel)]="entidad.TipoEntidadId" required>
                                                                <option *ngFor="let item of tipoEntidadLista"
                                                                    [ngValue]="item.idValorReferencia">
                                                                    {{ item.nombre }}
                                                                </option>
                                                            </select>
                                                            <div style="color: red" *ngIf="entidad.TipoEntidadId === null">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Naturaleza </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-agenda"></i>
                                                            </div>
                                                            <select name="TipoNaturaleza" class="form-control" [(ngModel)]="entidad.EntidadNaturalezaId" required>
                                                                <option *ngFor="let item of tipoNaturalezaLista"
                                                                    [ngValue]="item.idValorReferencia">
                                                                    {{ item.nombre }}
                                                                </option>
                                                            </select>
                                                            <div style="color: red" *ngIf="entidad.EntidadNaturalezaId === null">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Tipo de Identificación</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-agenda"></i>
                                                            </div>
                                                            <select name="TipoIdentificacionId" class="form-control" [(ngModel)]="entidad.TipoIdentificacionId" required>
                                                                <option *ngFor="let item of tipoDoc"
                                                                    [ngValue]="item.idValorReferencia">
                                                                    {{ item.nombre }}
                                                                </option>
                                                            </select>
                                                            <div style="color: red" *ngIf="entidad.TipoIdentificacionId === null">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Número Identificación</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-key"></i>
                                                            </div>
                                                            <input name="PersonaNumeroId" type="text" class="form-control" placeholder="Numero de Identificación" [(ngModel)]="entidad.EntidadNumIdentificacion" required />
                                                            <div style="color: red" *ngIf="entidad.EntidadNumIdentificacion === ''">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Fecha Formal de Creación de la Entidad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-time"></i>
                                                            </div>
                                                            <input required type="text" [(ngModel)]="entidad.EntidadFechaCreacion" placeholder="mm/dd/aaaa" name="EntidadFechaCreacion" [minDate]="{ year: 1900, month: 1, day: 1 }" ngbDatepicker #EntidadFechaCreacion="ngbDatepicker" />
                                                            <div class="input-group-addon bg-default" (click)="EntidadFechaCreacion.toggle()">
                                                                <span class="ti-calendar"></span>
                                                            </div>
                                                            <div style="color: red" *ngIf="entidad.EntidadFechaCreacion === ''">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Fecha Inicio Actividad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-time"></i>
                                                            </div>
                                                            <input required type="text" [(ngModel)]="entidad.EntidadFecInicioActividad" [minDate]="{ year: 1900, month: 1, day: 1 }" placeholder="mm/dd/aaaa" name="EntidadFecInicioActividad" ngbDatepicker #EntidadFecInicioActividad="ngbDatepicker" />
                                                            <div class="input-group-addon bg-default" (click)="EntidadFecInicioActividad.toggle()">
                                                                <span class="ti-calendar"></span>
                                                            </div>
                                                            <div style="color: red" *ngIf="entidad.EntidadFecInicioActividad === ''">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 col-xs-12">
                                                    <div class="form-group">
                                                        <label>Reseña Entidad</label>
                                                        <textarea class="form-control" rows="2" name="EntidadResena" placeholder="Máximo 1000 caracteres" [(ngModel)]="entidad.EntidadResena">
                                                        </textarea>
                                                        <div style="color: red" *ngIf="entidad.EntidadResena === ''">
                                                            <strong>&nbsp; * </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Datos Ubicación Física de la Entidad</span>
                                                </div>
                                            </div>
                                            <!-- <h3 class="box-title m-b-0">Datos Ubicación</h3> -->
                                            <!-- <p class="text-muted m-b-30 font-13"> Registre los datos de ubicación de su Entidad</p> -->

                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group row">
                                                        <label for="exampleInputuname">País</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-location-arrow"></i>
                                                            </div>
                                                            <select class="form-control" required name="PaisIdUbicacion" [(ngModel)]="entidad.PaisIdUbicacion" (change)="limpiarCamposLugarNacimiento()">
                                                                <option value="">
                                                                    -- Seleccione el País --
                                                                </option>
                                                                <option *ngFor="let item of paisesLista"
                                                                    [ngValue]="item.Id">
                                                                    {{ item.Nombre }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-1" *ngIf="entidad.PaisIdUbicacion !== 1 && entidad.PaisIdUbicacion !== null">
                                                </div>
                                                <div class="col-md-3" *ngIf="entidad.PaisIdUbicacion !== 1 && entidad.PaisIdUbicacion !== null">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Ciudad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadCiudadUbicacion" type="text" class="form-control" placeholder="Ciudad" [(ngModel)]="entidad.EntidadCiudadUbicacion" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-4 col-xs-4" *ngIf="entidad.PaisIdUbicacion === 1">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Departamento</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-location-arrow"></i>
                                                            </div>
                                                            <select class="form-control" required name="DepartamentoId" [(ngModel)]="entidad.DepartamentoId" (change)="mostrarMunicipios()">
                                                                <option value="">
                                                                    -- Seleccione el municipios --
                                                                </option>
                                                                <option *ngFor="let item of depLista"
                                                                    [ngValue]="item.Id">
                                                                    {{ item.Nombre }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-4 col-xs-4" *ngIf="entidad.PaisIdUbicacion === 1">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Municipio</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-location-arrow"></i>
                                                            </div>
                                                            <select class="form-control" required name="MunicipioId" [(ngModel)]="entidad.MunicipioId">
                                                                <option value="">
                                                                    -- Seleccione el municipio --
                                                                </option>
                                                                <option *ngFor="let item of munLista"
                                                                    [ngValue]="item.Id">
                                                                    {{ item.Nombre }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Dirección</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadDireccion" type="text" class="form-control" placeholder="Entidad Dirección" [(ngModel)]="entidad.EntidadDireccion" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Teléfono Fijo</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadTelefonoFijo" type="text" class="form-control" placeholder="Entidad Telefono Fijo" [(ngModel)]="entidad.EntidadTelefonoFijo" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Teléfono Móvil</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadTelefonoMovil" type="text" class="form-control" placeholder="Entidad Teléfono Móvil" [(ngModel)]="entidad.EntidadTelefonoMovil" required />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Email</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadEmail" type="email" class="form-control" placeholder="Entidad Email" [(ngModel)]="entidad.EntidadEmail" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Clasificación</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadClasificacion" type="text" class="form-control" placeholder="Entidad Clasificación" [(ngModel)]="entidad.EntidadClasificacion" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Clasificación Otro</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadClasificacionOtro" type="text" class="form-control" placeholder="Entidad Clasificación Otro" [(ngModel)]="entidad.EntidadClasificacionOtro" required />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Responsable Entidad</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Primer Nombre
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadPrimerNombreResponsable" type="text" class="form-control" placeholder="Primer Nombre Responsable" [(ngModel)]="entidad.EntidadPrimerNombreResponsable" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Segundo Nombre
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadSegundoNombreResponsable" type="text" class="form-control" placeholder="Segundo Nombre Responsable" [(ngModel)]="entidad.EntidadSegundoNombreResponsable" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Primer Apellido
                                                            Responsable</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadPrimerApellidoResponsable" type="text" class="form-control" placeholder="Primer Apellido Responsable" [(ngModel)]="entidad.EntidadPrimerApellidoResponsable" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Segundo Apellido
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadSegundoApellidoResponsable" type="text" class="form-control" placeholder="Segundo Apellido Responsable" [(ngModel)]="entidad.EntidadSegundoApellidoResponsable" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Telefono</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadTelefonoResponsable" type="text" class="form-control" placeholder="Telefono Responsable" [(ngModel)]="entidad.EntidadTelefonoResponsable" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Celular </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadCelularResponsable" type="text" class="form-control" placeholder="Celular Responsable" [(ngModel)]="entidad.EntidadCelularResponsable" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 col-xs-12">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Email Responsable Entidad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadEmailResponsable" type="email" class="form-control" placeholder="Email Responsable" [(ngModel)]="entidad.EntidadEmailResponsable" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Contacto Entidad</span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Nombre</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadNombreContacto" type="text" class="form-control" placeholder="Nombre" [(ngModel)]="entidad.EntidadNombreContacto" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Apellido</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadApellidoContacto" type="text" class="form-control" placeholder="Apellido" [(ngModel)]="entidad.EntidadApellidoContacto" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Teléfono</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadTelContacto" type="text" class="form-control" placeholder="Teléfono" [(ngModel)]="entidad.EntidadTelContacto" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Celular</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadMovilContacto" type="text" class="form-control" placeholder="Celular" [(ngModel)]="entidad.EntidadMovilContacto" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 col-xs-12">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Email contacto entidad</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadEmailContacto" type="email" class="form-control" placeholder="Email" [(ngModel)]="entidad.EntidadEmailContacto" required />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Redes Sociales</span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Perfil en Facebook</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-email"></i>
                                                            </div>
                                                            <input name="PefilFacebook" type="text" class="form-control" placeholder="http://www.facebook.com/pnmc.ministeriodecultura" [(ngModel)]="entidad.PefilFacebook" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Perfil en Twitter</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-key"></i>
                                                            </div>
                                                            <input name="PerfilTwitter" type="text" class="form-control" placeholder="http://twitter.com/mincultura" [(ngModel)]="entidad.PerfilTwitter" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Fotogalería en Flickr
                                                        </label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-email"> </i>
                                                            </div>
                                                            <input name="PerfilFlickr" type="text" class="form-control" placeholder="http://www.flickr.com/photos/cancilleriacol" [(ngModel)]="entidad.PerfilFlickr" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-xs-6">
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Canal de Youtube</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-key"></i>
                                                            </div>
                                                            <input name="CanalYoutube" type="text" class="form-control" placeholder="http://www.youtube.com/Mincultura" [(ngModel)]="entidad.CanalYoutube" />
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Perfil en Instagram</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-email"></i>
                                                            </div>
                                                            <input name="PerfilInstagram" type="text" class="form-control" placeholder="MinCultura Colombia (@mincultura)" [(ngModel)]="entidad.PerfilInstagram" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label for="exampleInputuname">Pagina Web</label>
                                                        <div class="input-group">
                                                            <div class="input-group-addon">
                                                                <i class="ti-user"></i>
                                                            </div>
                                                            <input name="EntidadPaginaWeb" type="text" class="form-control" placeholder="Entidad Pagina Web" [(ngModel)]="entidad.EntidadPaginaWeb" required />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card card-body">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Estado Registro</span>
                                                </div>
                                            </div>
                                            <div *ngIf="gestionaActores" class="row p-t-20">
                                                <div class="col-md-6">
                                                    <label for="exampleInputuname">Estado información</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="AgenteEstadoId" class="form-control" [(ngModel)]="entidad.EntidadEstadoId" required>
                                                            <option *ngFor="let item of EstadoLista"
                                                                [ngValue]="item.idValorReferencia">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <br />
                                                    <div class="col-md-2">
                                                        <button type="button" (click)="aprobarEntidad(entidad.EntidadEstadoId)" class="btn waves-effect waves-light btn-info">
                                                            Cambiar Estado
                                                            <i class="fa fa-arrow-right"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Observaciones estado</label>
                                                        <textarea class="form-control" rows="8" name="AgenteObservaciones" [(ngModel)]="entidad.EntidadObservaciones">
                                                        </textarea>
                                                    </div>
                                                </div>
                                            </div>

                                            <div *ngIf="!gestionaActores" class="row p-t-20">
                                                <div class="col-md-6">
                                                    <label for="exampleInputuname">
                                                        <strong>Estado: </strong>
                                                        {{ entidad.EstadoNombre }}
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="btn btn-success waves-effect waves-light m-r-10">
                                    <i class="fa fa-save"></i>
                                    Guardar
                                </button>

                                <button type="button" (click)="showPanel('V')" class="btn btn-primary waves-effect waves-light m-r-10">
                                    <i class="fa fa-backward"></i>
                                    Cancelar
                                </button>
                            </form>
                        </div>
                    </div>
                    <!-- #endregion -->
                </div>
                <div class="step-pane" id="step2" *ngIf="experiencia">
                    <!-- #region grilla experiencia -->
                    <br />
                    <div class="row align-content-center" *ngIf="displayListAgenteExperiencia">
                        <div class="col-md-2">
                            <button matTooltip="Nuevo" type="button" (click)="showPanelExperiencia('C')" class="btn btn-success m-b-0 button-tabla">
                                <i class="fa fa-plus"></i>
                                Agregar Experiencia
                            </button>
                        </div>
                    </div>

                    <div class="row" *ngIf="displayListAgenteExperiencia">
                        <dx-data-grid id="gridAgentesExperiencia" [dataSource]="listaEntidadesExperiencia" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="true" [columnAutoWidth]="true" keyExpr="EntidadExperienciaId">
                            <dxo-export [enabled]="true" fileName="Experiencia Entidad">
                            </dxo-export>
                            <dxo-filter-row [visible]="true"></dxo-filter-row>
                            <dxo-header-filter [visible]="true"></dxo-header-filter>
                            <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                            </dxo-grouping>
                            <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                            </dxo-group-panel>
                            <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar...">
                            </dxo-search-panel>
                            <dxo-remote-operations [sorting]="true" [paging]="true">
                            </dxo-remote-operations>
                            <!-- <dxo-state-storing [enabled]="true" type="localStorageAgentes" storageKey="storage"></dxo-state-storing> -->
                            <dxo-column-chooser [enabled]="true" mode="select">
                            </dxo-column-chooser>
                            <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center">
                            </dxi-column>
                            <dxi-column dataField="EntidadExperienciaId" caption="Id">
                            </dxi-column>
                            <dxi-column dataField="EntidadExperienciaCargo" caption="Cargo">
                            </dxi-column>
                            <dxi-column dataField="EntidadExperienciaFechaInicio" caption="Fecha Inicio">
                            </dxi-column>
                            <dxi-column dataField="EntidadExperienciaFechaFin" caption="Fecha Fin">
                            </dxi-column>
                            <dxi-column dataField="EntidadExperienciaEntidad" caption="EntidadExperienciaEntidad">
                            </dxi-column>

                            <div *dxTemplate="let d of 'accionCellTemplate'">
                                <div class="internal-grid-container">
                                    <div>
                                        <button type="button" matTooltip="Nuevo" (click)="showPanelExperiencia('C')" class="btn btn-success waves-effect waves-light m-r-10">
                                            <i class="fa fa-plus"></i>
                                        </button>

                                        <button type="button" matTooltip="Editar" (click)="showPanelExperiencia('U', d.data.EntidadExperienciaId)" class="btn btn-success waves-effect waves-light m-r-10">
                                            <i class="fa fa-edit"></i>
                                        </button>

                                        <button type="button" matTooltip="Borrar" (click)="borrarEntidadExperiencia(d.data.EntidadExperienciaId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                            <i class="fa fa-remove"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <dxo-summary>
                                <dxi-total-item column="EntidadId" summaryType="count" displayFormat="Cantidad: {0}">
                                </dxi-total-item>
                            </dxo-summary>
                            <dxo-paging [pageSize]="10"></dxo-paging>
                            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                            </dxo-pager>
                        </dx-data-grid>
                    </div>
                    <!-- #endregion -->
                    <!-- #region formulario crear experiencia -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <div *ngIf="displayCrearAgenteExperiencia">
                                    <form ngNativeValidate #formCcExpe="ngForm" (ngSubmit)="onSubmitExperiencia(formCcExpe.valid, 'P')" class="form p-t-20">
                                        <div class="activity-box m-t-30">
                                            <div class="date-devider">
                                                <span>Experiencia</span>
                                            </div>
                                        </div>
                                        <hr />
                                        <div class="row p-t-20">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Tipo experiencia
                                                    </label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="TipoExperienciaId" class="form-control" [(ngModel)]="entidadExperiencia.TipoExperienciaId" required>
                                                            <option *ngFor="let item of tipoExperienciaLista"
                                                                [ngValue]="item.idValorReferencia">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Entidad</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-key"></i>
                                                        </div>
                                                        <input name="EntidadExperienciaEntidad" type="text" class="form-control" placeholder="Entidad en la que trabajo" [(ngModel)]="entidadExperiencia.EntidadExperienciaEntidad" required />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Actividad Desarrollada</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-key"></i>
                                                        </div>
                                                        <input name="EntidadExperienciaCargo" type="text" class="form-control" placeholder="Nombre cargo ocupado " [(ngModel)]="entidadExperiencia.EntidadExperienciaActividadDesarrollada" required />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row p-t-20">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Fecha de inicio</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-time"></i>
                                                        </div>
                                                        <input required type="text" [(ngModel)]="entidadExperiencia.EntidadExperienciaFechaInicio" [minDate]="{ year: 1900, month: 1, day: 1 }" [maxDate]="maxDate" placeholder="mm/dd/aaaa" name="AgenteExperienciaFechaInicio" ngbDatepicker #AgenteExperienciaFechaInicio="ngbDatepicker"
                                                        />
                                                        <div class="input-group-addon bg-default" (click)="AgenteExperienciaFechaInicio.toggle()">
                                                            <span class="ti-calendar"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Fecha terminación</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-time"></i>
                                                        </div>
                                                        <input required type="text" (ngModelChange)="CambioFechaExperiencia($event)" [(ngModel)]="entidadExperiencia.EntidadExperienciaFechaFin" [minDate]="{ year: 1900, month: 1, day: 1 }" [maxDate]="maxDate" placeholder="mm/dd/aaaa" name="AgenteExperienciaFechaFin"
                                                            ngbDatepicker #AgenteExperienciaFechaFin="ngbDatepicker" />
                                                        <div class="input-group-addon bg-default" (click)="AgenteExperienciaFechaFin.toggle()">
                                                            <span class="ti-calendar"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Archivo soporte de la
                                                        experiencia</label>
                                                    <div class="input-group">
                                                        <dx-file-uploader #fileUploaderExperiencia uploadUrl="{{ url }}" required [multiple]="false" accept="*" [(value)]="valueExperiencia" uploadMode="useButtons" labelText="o arrastrar archivo" selectButtonText="Seleccionar archivo" (onValueChanged)="addIdParameterPdf($event)"
                                                            uploadButtonText="Subir Archivo" readyToUploadMessage="Listo para subir" uploadFailedMessage="Ocurrio un error al subir el archivo" (onUploaded)="subidaCompletaPdfExperiencia($event)" [allowedFileExtensions]="['.pdf']"
                                                            [maxFileSize]="4000000">
                                                        </dx-file-uploader>
                                                        <span class="note">Extensiones Permitidas:
                                                            <span>.pdf</span>.</span>
                                                        <span class="note">Tamaño maximo: <span>4 MB</span>.</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <button type="button" [ngClass]="entidadExperiencia.Fotografia == ''? ocultoExperiencia: ''" (click)="descargarArchivoExperiencia()" class="btn btn-success waves-effect waves-light m-r-10">
                                                    <i class="fa fa-download"></i>
                                                    Descargar Archivo
                                                </button>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Descripción de la experiencia</label>
                                                    <textarea class="form-control" rows="8" name="AgenteExperienciaObservaciones" [(ngModel)]="entidadExperiencia.EntidadExperienciaObservaciones" required>
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-4"></div>
                                            <div class="col-md-2">
                                                <button type="submit" class="btn waves-effect waves-light btn-success">
                                                    Guardar
                                                    <i class="fa fa-save"></i>
                                                </button>
                                            </div>

                                            <div class="col-md-2">
                                                <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showPanelExperiencia('V', '2')">
                                                    <i class="fa fa-backward"></i>
                                                    Cancelar
                                                </button>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>

                                        <div class="activity-box m-t-30">
                                            <div class="date-devider">
                                                <span>Fin Experiencia</span>
                                            </div>
                                        </div>
                                        <hr />
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="actions">
                        <div class="row p-t-20">
                            <div class="col-md-2">
                                <button type="button" class="btn waves-effect waves-light btn-info" (click)="showPanel2('R')">
                                    <i class="fa fa-arrow-left"></i>
                                    Anterior
                                </button>
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn waves-effect waves-light btn-info" (click)="showPanel2('O')">
                                    Siguiente
                                    <i class="fa fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="activity-box m-t-30">
                            <div class="date-devider"></div>
                        </div>
                    </div>
                    <br />
                    <!-- #endregion -->
                </div>

                <div class="step-pane" id="step3" *ngIf="salas">
                    <!-- #region Grilla mostrar lista de Salas -->
                    <br />
                    <div class="row align-content-center" *ngIf="displayListEntidadSalas">
                        <div class="col-md-2">
                            <button matTooltip="Nuevo" type="button" (click)="showPanelEntidadSalas('C')" class="btn btn-success m-b-0 button-tabla">
                                <i class="fa fa-plus"></i>
                                Agregar Sala
                            </button>
                        </div>
                    </div>


                    <div class="row" *ngIf="displayListEntidadSalas">
                        <dx-data-grid id="gridEntidadSala" [dataSource]="listaEntidadSala" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="true" [columnAutoWidth]="true" keyExpr="SalaId">
                            <dxo-export [enabled]="true" fileName="Sala Entidad">
                            </dxo-export>
                            <dxo-filter-row [visible]="true"></dxo-filter-row>
                            <dxo-header-filter [visible]="true"></dxo-header-filter>
                            <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                            </dxo-grouping>
                            <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                            </dxo-group-panel>
                            <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>
                            <dxo-remote-operations [sorting]="true" [paging]="true">
                            </dxo-remote-operations>
                            <dxo-column-chooser [enabled]="true" mode="select">
                            </dxo-column-chooser>
                            <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center">
                            </dxi-column>
                            <dxi-column dataField="SalaId" caption="SalaId"> </dxi-column>
                            <dxi-column dataField="EntidadId" caption="Entidad"> </dxi-column>
                            <dxi-column dataField="SalaNombre" caption="Nombre sala">
                            </dxi-column>
                            <dxi-column dataField="SalaMision" caption="Mision sala"> </dxi-column>
                            <dxi-column dataField="SalaResenaHistorica" caption="Reseña histórica">
                            </dxi-column>
                            <dxi-column dataField="SalaTrayectoria" caption="Trayectoria">
                            </dxi-column>
                            <dxi-column dataField="SalaDireccion" caption="Dirección">
                            </dxi-column>
                            <dxi-column dataField="MunicipioId" caption="Municipio">
                            </dxi-column>
                            <dxi-column dataField="SalaTelefonoMovil" caption="Teléfono movil">
                            </dxi-column>
                            <dxi-column dataField="SalaTelefonoFijo" caption="Teléfono fijo">
                            </dxi-column>
                            <dxi-column dataField="SalaEmail" caption="Email">
                            </dxi-column>
                            <dxi-column dataField="ModalidadSalaId" caption="Modalidad">
                            </dxi-column>
                            <dxi-column dataField="TeneciaInmubleId" caption="Tipo de tenencia inmueble">
                            </dxi-column>
                            <dxi-column dataField="SalaFechaInicioProgramacion" caption="Fecha inicio funcionamiento">
                            </dxi-column>
                            <!-- <dxi-column dataField="SalaFechaRegistro" caption="Fecha Registro">
                            </dxi-column>
                            <dxi-column dataField="SalaFechaAprobacion" caption="Fecha Aprobación">
                            </dxi-column>
                            <dxi-column dataField="SalaFechaEdito" caption="Fecha Edito">
                            </dxi-column>
                            <dxi-column dataField="CuentaUsuarioIdEdito" caption="Usuario Edito">
                            </dxi-column>
                            <dxi-column dataField="CuentaUsuarioIdCreacion" caption="Creación cuenta usuario">
                            </dxi-column> -->
                            <dxi-column dataField="SalaEstadoId" caption="Estado sala">
                            </dxi-column>

                            <div *dxTemplate="let d of 'accionCellTemplate'">
                                <div class="internal-grid-container">
                                    <div>
                                        <button type="button" matTooltip=" Nuevo" (click)="showPanelEntidadSalas('C')" class="btn btn-success waves-effect waves-light m-r-10">
                                            <i class="fa fa-plus"></i>
                                        </button>

                                        <button type="button" matTooltip="Editar" (click)="showPanelEntidadSalas('U', d.data.SalaId)" class="btn btn-success waves-effect waves-light m-r-10">
                                            <i class="fa fa-edit"></i>
                                        </button>

                                        <button type="button" matTooltip="Borrar" (click)="borrarEntidadSala(d.data.SalaId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                            <i class="fa fa-remove"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <dxo-summary>
                                <dxi-total-item column="EntidadId" summaryType="count" displayFormat="Cantidad: {0}">
                                </dxi-total-item>
                            </dxo-summary>
                            <dxo-paging [pageSize]="10"></dxo-paging>
                            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                            </dxo-pager>
                        </dx-data-grid>
                    </div>
                    <!-- #endregion  -->
                    <!-- #region Sala -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <!-- #region Formulario crear sala -->
                                <div *ngIf="displayCrearEntidadSalas">
                                    <form ngNativeValidate #formCcSala="ngForm" (ngSubmit)="onSubmitSala(formCcSala.valid, 'P')" class="form p-t-20">
                                        <div class="activity-box m-t-30">
                                            <div class="date-devider">
                                                <span>Sala de teatro</span>
                                            </div>
                                        </div>
                                        <hr />
                                        <div class="row p-t-20">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="SalaNombre">
                                                        Nombre
                                                    </label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-user"></i>
                                                        </div>
                                                        <input name="SalaNombre" id="SalaNombre" type="text" class="form-control" placeholder="Nombre" [(ngModel)]="sala.SalaNombre" required #SalaNombreControl="ngModel" />
                                                        <ng-container *ngIf="!SalaNombreControl.valid && SalaNombreControl.touched">
                                                            <div style="color: red" *ngIf="SalaNombreControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Dirección</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-user"></i>
                                                        </div>
                                                        <input name="SalaDireccion" type="text" class="form-control" placeholder="Dirección" [(ngModel)]="sala.SalaDireccion" required #SalaDireccionControl="ngModel" />
                                                        <ng-container *ngIf="!SalaDireccionControl.valid && SalaDireccionControl.touched">
                                                            <div style="color: red" *ngIf="SalaDireccionControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Departamento</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-location-arrow"></i>
                                                        </div>
                                                        <select class="form-control" required name="DepartamentoId" [(ngModel)]="sala.DepartamentoId" (change)="mostrarMunicipiosSalas()" #SalaDptoControl="ngModel">
                                                            <option value="">
                                                                -- Seleccione el departamento --
                                                            </option>
                                                            <option *ngFor="let item of depListaSalas"
                                                                [ngValue]="item.Id">
                                                                {{ item.Nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaDptoControl.valid && SalaDptoControl.touched">
                                                            <div style="color: red" *ngIf="SalaDptoControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Municipio</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-location-arrow"></i>
                                                        </div>
                                                        <select name="MunicipioId" class="form-control" [(ngModel)]="sala.MunicipioId" required #SalaMunicipioControl="ngModel">
                                                            <option *ngFor="let item of munListaSalas"
                                                                [ngValue]="item.Id">
                                                                {{ item.Nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaMunicipioControl.valid && SalaMunicipioControl.touched">
                                                            <div style="color: red" *ngIf="SalaMunicipioControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Teléfono</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-user"></i>
                                                        </div>
                                                        <input name="SalaTelefonoFijo" type="text" class="form-control" minlength="7" maxlength="7" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="sala.SalaTelefonoFijo" #SalaTelefonoControl="ngModel" required
                                                        />

                                                        <ng-container *ngIf="!SalaTelefonoControl.valid && SalaTelefonoControl.touched">
                                                            <div style="color: red" *ngIf="SalaTelefonoControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                            <div style="color: red" *ngIf="SalaTelefonoControl.errors.minlength" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Celular</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-user"></i>
                                                        </div>
                                                        <input name="SalaCelular" type="text" id="SalaCelular" class="form-control" placeholder="Celular" [(ngModel)]="sala.SalaTelefonoMovil" minlength="10" maxlength="10" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;"
                                                            required #SalaCelularControl="ngModel" />
                                                        <ng-container *ngIf="!SalaCelularControl.valid && SalaCelularControl.touched">
                                                            <div style="color: red" *ngIf="SalaCelularControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                            <div style="color: red" *ngIf="SalaCelularControl.errors.minlength" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Email</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-email"></i>
                                                        </div>
                                                        <input name="SalaEmail" type="email" id="SalaEmail" class="form-control" placeholder="Email" [(ngModel)]="sala.SalaEmail" required #SalaEmailControl="ngModel" email=true />
                                                        <ng-container *ngIf="!SalaEmailControl.valid && SalaEmailControl.touched">
                                                            <div style="color: red" *ngIf="SalaEmailControl.errors.email" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                            <div style="color: red" *ngIf="SalaEmailControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Modalidad</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="SalaModalidad" class="form-control" [(ngModel)]="sala.ModalidadSalaId" #SalaModalidadControl="ngModel" required>
                                                            <option *ngFor="let item of listaModalidad"
                                                                [ngValue]="item.idValorReferencia">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaModalidadControl.valid && SalaModalidadControl.touched">
                                                            <div style="color: red" *ngIf="SalaModalidadControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Tipo de tenencia de inmueble</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="SalaTeneciaInmuble" class="form-control" [(ngModel)]="sala.TeneciaInmubleId" #SalaTeneciaInmuble="ngModel" required>
                                                            <option *ngFor="let item of listaTenenciaInmueble"
                                                                [ngValue]="item.idValorReferencia">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaTeneciaInmuble.valid && SalaTeneciaInmuble.touched">
                                                            <div style="color: red" *ngIf="SalaTeneciaInmuble.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Fecha de inicio de
                                                        funcionamiento</label>
                                                    <div class="input-group flex-wrap">
                                                        <div class="input-group-addon">
                                                            <i class="ti-time"></i>
                                                        </div>
                                                        <input required type="text" [(ngModel)]="sala.SalaFechaInicioProgramacion" [minDate]="{ year: 1900, month: 1, day: 1 }" [maxDate]="maxDate" placeholder="mm/dd/aaaa" name="SalaFechaInicioProgramacion" ngbDatepicker #SalaFechaInicioProgramacion="ngbDatepicker"
                                                        />
                                                        <div class="input-group-addon bg-default" (click)="SalaFechaInicioProgramacion.toggle()">
                                                            <span class="ti-calendar"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">¿Tiene programación permanente?
                                                    </label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="SalaProgramacionPermanente" class="form-control" [(ngModel)]="sala.SalaProgramacionPermanente" #SalaProgramacionPermanenteControl="ngModel" required>
                                                            <option *ngFor="let item of listaSalaProgramacionPermanente"
                                                                [ngValue]="item.nombre">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaProgramacionPermanenteControl.valid && SalaProgramacionPermanenteControl.touched">
                                                            <div style="color: red" *ngIf="SalaProgramacionPermanenteControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">¿La sala está vinculada a algún
                                                        programa de salas concertadas nacional o territorial?</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="SalaConcertadaNacionalTerritoria" class="form-control" [(ngModel)]="sala.SalaConcertadaNacionalTerritoria" #SalaConcertadaNacionalTerritoriaControl="ngModel" required>
                                                            <option
                                                                *ngFor="let item of listaSalaConcertadaNacionalTerritoria"
                                                                [ngValue]="item.nombre">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaConcertadaNacionalTerritoriaControl.valid && SalaConcertadaNacionalTerritoriaControl.touched">
                                                            <div style="color: red" *ngIf="SalaConcertadaNacionalTerritoriaControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="exampleInputuname">Sala beneficiaria de la Ley de
                                                        Espectáculos Públicos - LEP</label>
                                                    <div class="input-group">
                                                        <div class="input-group-addon">
                                                            <i class="ti-agenda"></i>
                                                        </div>
                                                        <select name="SalaBeneficiariaLEP" class="form-control" [(ngModel)]="sala.SalaBeneficiariaLEP" #SalaBeneficiariaLEPControl="ngModel" required>
                                                            <option *ngFor="let item of listaSalaBeneficiariaLEP"
                                                                [ngValue]="item.nombre">
                                                                {{ item.nombre }}
                                                            </option>
                                                        </select>
                                                        <ng-container *ngIf="!SalaBeneficiariaLEPControl.valid && SalaBeneficiariaLEPControl.touched">
                                                            <div style="color: red" *ngIf="SalaBeneficiariaLEPControl.errors.required" class="error-message">
                                                                <strong>&nbsp; * </strong>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Misión</label>
                                                    <textarea class="form-control" rows="5" name="SalaMision" maxlength="500" [(ngModel)]="sala.SalaMision" #SalaMisionControl="ngModel" required>
                                                    </textarea>
                                                    <ng-container *ngIf="!SalaMisionControl.valid && SalaMisionControl.touched">
                                                        <div style="color: red; font-size: 14px" *ngIf="SalaMisionControl.errors.required" class="error-message">
                                                            <p size="6">* Este campo es requerido</p>
                                                        </div>
                                                    </ng-container>

                                                    <div style="color: red; font-size: 14px;" *ngIf="sala.SalaMision.length >= 500" class="error-message">
                                                        <p>* Máximo caracteres permitidos {{sala.SalaMision.length}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row p-t-20">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Reseña histórica</label>
                                                    <textarea class="form-control" rows="5" name="SalaResenaHistorica" maxlength="500" [(ngModel)]="sala.SalaResenaHistorica" #SalaResenaHistoricaControl="ngModel" required>
                                                    </textarea>
                                                    <ng-container *ngIf="!SalaResenaHistoricaControl.valid && SalaResenaHistoricaControl.touched">
                                                        <div style="color: red; font-size: 14px" *ngIf="SalaResenaHistoricaControl.errors.required" class="error-message">
                                                            <p size="6">* Este campo es requerido</p>
                                                        </div>
                                                    </ng-container>

                                                    <div style="color: red; font-size: 14px;" *ngIf="sala.SalaResenaHistorica.length >= 500" class="error-message">
                                                        <p>* Máximo caracteres permitidos {{sala.SalaResenaHistorica.length}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row p-t-20">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Trayectoria</label>
                                                    <textarea class="form-control" rows="5" name="SalaTrayectoria" maxlength="500" [(ngModel)]="sala.SalaTrayectoria" #SalaTrayectoriaControl="ngModel" required>
                                                    </textarea>
                                                    <ng-container *ngIf="!SalaTrayectoriaControl.valid && SalaTrayectoriaControl.touched">
                                                        <div style="color: red; font-size: 14px" *ngIf="SalaTrayectoriaControl.errors.required" class="error-message">
                                                            <p size="6">* Este campo es requerido</p>
                                                        </div>
                                                    </ng-container>

                                                    <div style="color: red; font-size: 14px;" *ngIf="sala.SalaTrayectoria.length >= 500" class="error-message">
                                                        <p>* Máximo caracteres permitidos {{sala.SalaTrayectoria.length}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- #region Lista de función por sala de teatro -->
                                        <div *ngIf="displayListaFuncion">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Funciones de la sala en el año 2019</span>
                                                </div>
                                            </div>
                                            <hr />

                                            <div class="row align-content-center" *ngIf="displayListaFuncion">
                                                <div class="col-md-2">
                                                    <button matTooltip="Nuevo" type="button" (click)="showAccionFuncion(null, 'C')" class="btn btn-success m-b-0 button-tabla">
                                                        <i class="fa fa-plus"></i>
                                                        Agregar Función
                                                    </button>
                                                </div>
                                            </div>

                                            <dx-data-grid id="gridFuncionSala" [dataSource]="listaFuncionSala" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="true" [columnAutoWidth]="true" keyExpr="FuncionId">
                                                <dxo-export [enabled]="true" fileName="Sala Funcion"></dxo-export>
                                                <dxo-filter-row [visible]="true"></dxo-filter-row>
                                                <dxo-header-filter [visible]="true"></dxo-header-filter>
                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                </dxo-grouping>
                                                <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                                                </dxo-group-panel>
                                                <dxo-search-panel [visible]="true" placeholder="Buscar...">
                                                </dxo-search-panel>
                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                </dxo-remote-operations>
                                                <dxo-column-chooser [enabled]="true" mode="select"></dxo-column-chooser>
                                                <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center"></dxi-column>
                                                <dxi-column dataField="SalaId" caption="Sala Id"> </dxi-column>
                                                <dxi-column dataField="FuncionRealizada" caption="Funcion realizada">
                                                </dxi-column>
                                                <dxi-column dataField="FuncionFecha" caption="Fecha"></dxi-column>
                                                <dxi-column dataField="FuncionAbierta" caption="Abierta"> </dxi-column>
                                                <dxi-column dataField="FuncionNombre" caption="Funcion nombre">
                                                </dxi-column>
                                                <dxi-column dataField="FuncionCodigoPULEP" caption="Codigo PULEP">
                                                </dxi-column>
                                                <dxi-column dataField="FuncionNombreGrupo" caption="Nombre grupo">
                                                </dxi-column>
                                                <dxi-column dataField="FuncionGrupoPlanta" caption="Funcion grupo planta"></dxi-column>
                                                <dxi-column dataField="FuncionCantidad" caption="Funcion cantidad">
                                                </dxi-column>
                                                <dxi-column dataField="DisciplinaArtisticaId" caption="Disciplina artistica Id"></dxi-column>
                                                <dxi-column dataField="PaisIdProcedenciaGrupo" caption="Pais Id procedenciag grupo"></dxi-column>
                                                <dxi-column dataField="MunicipioIdProcedenciaGrupo" caption="Minicipio Id procedencia Grupo"></dxi-column>
                                                <dxi-column dataField="FuncionCiudadProcedenciaGrupoOtroPais" caption="Funcion ciudad procedencia grupoo tro pais"></dxi-column>
                                                <!-- <dxi-column dataField="FuncionFechaRegistro" caption="Fecha registro"></dxi-column>
                                        <dxi-column dataField="FuncionFechaEdito" caption="FechaEdito"></dxi-column>
                                        <dxi-column dataField="FuncionUsuarioIdEdito" caption="Usuario Id Edito"></dxi-column>
                                        <dxi-column dataField="FuncionUsuarioIdCreacion" caption="Funcion usuario Id creacion"></dxi-column> -->
                                                <dxi-column dataField="ProyectoId" caption="Proyecto"></dxi-column>
                                                <dxi-column dataField="TipoFuncionId" caption="Tipo de funcón">
                                                </dxi-column>

                                                <div *dxTemplate="let d of 'accionCellTemplate'">
                                                    <div class="internal-grid-container">
                                                        <div>
                                                            <button type="button" matTooltip=" Nuevo" (click)="showAccionFuncion(d.data.FuncionId, 'C')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                <i class="fa fa-plus"></i>
                                                            </button>

                                                            <button type="button" matTooltip="Editar" (click)="showAccionFuncion(d.data.FuncionId, 'U')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                <i class="fa fa-edit"></i>
                                                            </button>

                                                            <button type="button" matTooltip="Borrar" (click)="borrarFuncion(d.data.FuncionId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                                                <i class="fa fa-remove"></i>
                                                            </button>


                                                        </div>
                                                    </div>
                                                </div>

                                                <dxo-summary>
                                                    <dxi-total-item column="FuncionId" summaryType="count" displayFormat="Cantidad: {0}">
                                                    </dxi-total-item>
                                                </dxo-summary>
                                                <dxo-paging [pageSize]="10"></dxo-paging>
                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                </dxo-pager>
                                            </dx-data-grid>
                                            <dx-popup [width]="900" [height]="700" [showTitle]="true" title="Funcion de sala {{sala.SalaNombre}}" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="popupVisibleFuncion">
                                                <!-- #region Formulario función -->
                                                <dx-scroll-view width="100%" height="100%">
                                                    <div class="col-12">
                                                        <div class="card">
                                                            <div class="card-body">
                                                                <div *ngIf="popupVisibleFuncion">
                                                                    <form ngNativeValidate #formCcFuncion="ngForm" (ngSubmit)="onSubmitFuncion(formCcFuncion.valid)">
                                                                        <div class="activity-box m-t-30">
                                                                            <div class="date-devider">
                                                                                <span>Descripción de la función</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionRealizada">Función
                                                                                        realizada</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="FuncionRealizada" class="form-control" [(ngModel)]="funcion.FuncionRealizada" #FuncionRealizadaControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaFuncionRealizada"
                                                                                                [ngValue]="item.nombre">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!FuncionRealizadaControl.valid && FuncionRealizadaControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionRealizadaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="exampleInputuname">Fecha</label>
                                                                                    <div class="input-group flex-wrap">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-time"></i>
                                                                                        </div>
                                                                                        <input required type="text" [(ngModel)]="funcion.FuncionFecha" [minDate]="{ year: 1900, month: 1, day: 1 }" [maxDate]="maxDate" placeholder="mm/dd/aaaa" name="FuncionFecha" ngbDatepicker #FuncionFecha="ngbDatepicker" />
                                                                                        <div class="input-group-addon bg-default" (click)="FuncionFecha.toggle()">
                                                                                            <span class="ti-calendar"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row p-t-20">

                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionAbierta">Función
                                                                                        abierta : función para acceso del público en general</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="FuncionAbierta" class="form-control" [(ngModel)]="funcion.FuncionAbierta" #FuncionAbiertaControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaFuncionAbierta"
                                                                                                [ngValue]="item.nombre">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!FuncionAbiertaControl.valid && FuncionAbiertaControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionAbiertaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionNombre">
                                                                                        Función nombre
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="FuncionNombre" id="FuncionNombre" type="text" class="form-control" placeholder="Nombre" [(ngModel)]="funcion.FuncionNombre" #FuncionNombreControl="ngModel" required />
                                                                                        <ng-container *ngIf="!FuncionNombreControl.valid && FuncionNombreControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionNombreControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionCodigoPULEP">
                                                                                        Código PULEP
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="FuncionCodigoPULEP" id="FuncionCodigoPULEP" type="text" class="form-control" placeholder="Código PULEP" [(ngModel)]="funcion.FuncionCodigoPULEP" #FuncionCodigoPULEPControl="ngModel" />
                                                                                        <!-- <ng-container *ngIf="!FuncionCodigoPULEPControl.valid && FuncionCodigoPULEPControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionCodigoPULEPControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container> -->
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionNombreGrupo">
                                                                                        Nombre grupo
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="FuncionNombreGrupo" id="FuncionNombreGrupo" type="text" class="form-control" placeholder="Nombre de grupo" [(ngModel)]="funcion.FuncionNombreGrupo" #FuncionNombreGrupoControl="ngModel" required />
                                                                                        <ng-container *ngIf="!FuncionNombreGrupoControl.valid && FuncionNombreGrupoControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionNombreGrupoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionGrupoPlanta">Grupo
                                                                                        planta</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="FuncionGrupoPlanta" class="form-control" [(ngModel)]="funcion.FuncionGrupoPlanta" #FuncionGrupoPlantaControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaFuncionGrupoPlanta"
                                                                                                [ngValue]="item.nombre">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!FuncionGrupoPlantaControl.valid && FuncionGrupoPlantaControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionGrupoPlantaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="FuncionCantidad">Cantidad</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="FuncionCantidad" type="text" class="form-control" minlength="7" maxlength="7" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="funcion.FuncionCantidad" #FuncionCantidadControl="ngModel" required
                                                                                        />

                                                                                        <ng-container *ngIf="!FuncionCantidadControl.valid && FuncionCantidadControl.touched">
                                                                                            <div style="color: red" *ngIf="FuncionCantidadControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <!-- <div style="color: red"
                                                                                                                                                *ngIf="SalaTelefonoControl.errors.minlength"
                                                                                                                                                class="error-message">
                                                                                                                                                <strong>&nbsp; * </strong>
                                                                                                                                            </div> -->
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="DisciplinaArtisticaFuncion">Disciplina
                                                                                        artística</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="DisciplinaArtisticaFuncion" class="form-control" [(ngModel)]="funcion.DisciplinaArtisticaId" #DisciplinaArtisticaFuncionControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaDisciplinaArtistica"
                                                                                                [ngValue]="item.idValorReferencia">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!DisciplinaArtisticaFuncionControl.valid && DisciplinaArtisticaFuncionControl.touched">
                                                                                            <div style="color: red" *ngIf="DisciplinaArtisticaFuncionControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="PaisFuncion">País de procedencia del grupo</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="PaisFuncion" class="form-control" [(ngModel)]="funcion.PaisIdProcedenciaGrupo" #PaisFuncionControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of paisesListaFuncion"
                                                                                                [ngValue]="item.Id">
                                                                                                {{ item.Nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!PaisFuncionControl.valid && PaisFuncionControl.touched">
                                                                                            <div style="color: red" *ngIf="PaisFuncionControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="DepartamentoFuncion">Departamento de procedencia del grupo</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="DepartamentoFuncion" class="form-control" [(ngModel)]="funcion.DepartamentoIdProcedenciaGrupo" (change)="mostrarMunicipiosFuncion()" #DepartamentoFuncionControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of depListaFuncion"
                                                                                                [ngValue]="item.Id">
                                                                                                {{ item.Nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!DepartamentoFuncionControl.valid && DepartamentoFuncionControl.touched">
                                                                                            <div style="color: red" *ngIf="DepartamentoFuncionControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="MunicipioFuncion">Municipio de procedencia del grupo</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="MunicipioFuncion" class="form-control" [(ngModel)]="funcion.MunicipioIdProcedenciaGrupo" #MunicipioFuncionControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of munListaFuncion"
                                                                                                [ngValue]="item.Id">
                                                                                                {{ item.Nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!MunicipioFuncionControl.valid && MunicipioFuncionControl.touched">
                                                                                            <div style="color: red" *ngIf="MunicipioFuncionControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Ciudad procedencia grupo otro
                                                                                        pais</label>
                                                                                    <textarea class="form-control" rows="5" name="FuncionCiudadProcedenciaGrupoOtroPais" maxlength="200" [(ngModel)]="funcion.FuncionCiudadProcedenciaGrupoOtroPais" #FuncionCiudadProcedenciaGrupoOtroPaisControl="ngModel" required>
                                                                                                                                    </textarea>
                                                                                    <ng-container *ngIf="!FuncionCiudadProcedenciaGrupoOtroPaisControl.valid && FuncionCiudadProcedenciaGrupoOtroPaisControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="FuncionCiudadProcedenciaGrupoOtroPaisControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="funcion.FuncionCiudadProcedenciaGrupoOtroPais.length >= 200" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{funcion.FuncionCiudadProcedenciaGrupoOtroPais.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row p-t-20">
                                                                            <!-- <div class="form-group">
                                                                                                                                <label for="Municipio">Tipo de función</label>
                                                                                                                                <div class="input-group">
                                                                                                                                    <div class="input-group-addon">
                                                                                                                                        <i class="ti-location-arrow"></i>
                                                                                                                                    </div>
                                                                                                                                    <select name="TipoFuncion" class="form-control"
                                                                                                                                        [(ngModel)]="funcion.TipoFuncionId" required #MunicipioEntidadBancariaControl="ngModel">
                                                                                                                                        <option *ngFor="let item of munListaProyecto"
                                                                                                                                            [ngValue]="item.Id">
                                                                                                                                            {{ item.Nombre }}
                                                                                                                                        </option>
                                                                                                                                    </select>
                                                                                                                                    <ng-container *ngIf="!SalaMunicipioControl.valid && SalaMunicipioControl.touched">
                                                                                                                                        <div style="color: red"
                                                                                                                                            *ngIf="SalaMunicipioControl.errors.required"
                                                                                                                                            class="error-message">
                                                                                                                                            <strong>&nbsp; * </strong>
                                                                                                                                        </div>
                                                                                                                                    </ng-container>
                                                                                                                                </div>
                                                                                                                            </div> -->
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-4"></div>
                                                                            <div class="col-md-2">
                                                                                <button type="submit" class="btn waves-effect waves-light btn-success">
                                                                                    Guardar
                                                                                    <i class="fa fa-save"></i>
                                                                                </button>
                                                                            </div>

                                                                            <div class="col-md-2">
                                                                                <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showVolverFuncion()">
                                                                                    <i class="fa fa-backward"></i>
                                                                                    Cancelar
                                                                                </button>
                                                                            </div>
                                                                            <div class="col-md-4"></div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </dx-scroll-view>
                                                <!-- #endregion -->
                                            </dx-popup>

                                            <!-- <div class="activity-box m-t-30">
                                            <div class="date-devider">
                                                <span>Fin Proyectos</span>
                                            </div>
                                            </div> -->
                                            <hr />
                                        </div>
                                        <!-- #endregion -->

                                        <!-- #region poyectos de la sala de teatro -->
                                        <div *ngIf="displayListaProyectos && validarFechaProyecto">
                                            <div class="activity-box m-t-30">
                                                <div class="date-devider">
                                                    <span>Proyectos de la sala</span>
                                                </div>
                                            </div>
                                            <hr />

                                            <div class="row align-content-center" *ngIf="displayListaProyectos && validarFechaProyecto">
                                                <div class="col-md-2">
                                                    <button matTooltip="Nuevo" type="button" (click)="showAccionProyecto(null, 'C')" class="btn btn-success m-b-0 button-tabla">
                                                        <i class="fa fa-plus"></i>
                                                        Agregar proyecto
                                                    </button>
                                                </div>
                                            </div>
                                            <dx-data-grid id="gridProyectosSala" [dataSource]="listaProyectosSala" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="true" [columnAutoWidth]="true" keyExpr="ProyectoId">
                                                <dxo-export [enabled]="true" fileName="Proyectos Sala teatro">
                                                </dxo-export>
                                                <dxo-filter-row [visible]="true"></dxo-filter-row>
                                                <dxo-header-filter [visible]="true"></dxo-header-filter>
                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                </dxo-grouping>
                                                <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                                                </dxo-group-panel>
                                                <dxo-search-panel [visible]="true" placeholder="Buscar...">
                                                </dxo-search-panel>
                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                </dxo-remote-operations>
                                                <dxo-column-chooser [enabled]="true" mode="select"></dxo-column-chooser>
                                                <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center"></dxi-column>
                                                <dxi-column dataField="SalaId" caption="Sala Id"> </dxi-column>
                                                <dxi-column dataField="ProyectoPrimerNombreEncargado" caption="Primer nombre"> </dxi-column>
                                                <dxi-column dataField="ProyectoOtrosNombresEncargado" caption="Otros nombres"></dxi-column>
                                                <dxi-column dataField="ProyectoPrimerApellidoEncargado" caption="Primer apellido"> </dxi-column>
                                                <dxi-column dataField="ProyectoSegundoApellidoEncargado" caption="Segundo apellido"></dxi-column>
                                                <dxi-column dataField="ProyectoTelefonoMovil" caption="Celular">
                                                </dxi-column>
                                                <dxi-column dataField="ProyectoEntidadBancaria" caption="Entidad bancaria"></dxi-column>
                                                <dxi-column dataField="MunicipioIdEntidadBancaria" caption="Municipio entidad bancaria"></dxi-column>
                                                <dxi-column dataField="ProyectoNumeroCuentaBancaria" caption="Número cuenta bancaria"></dxi-column>
                                                <dxi-column dataField="TipoCuentaBancariaId" caption="Tipo de cuenta bancaria"></dxi-column>
                                                <dxi-column dataField="ProyectoNecesidadSala" caption="Necesidad Sala">
                                                </dxi-column>
                                                <dxi-column dataField="ProyectoObjetivoGeneral" caption="Objetivo general"></dxi-column>
                                                <dxi-column dataField="ProyectoObjetivosEspecificos" caption="Objetivos especificos"></dxi-column>
                                                <dxi-column dataField="ProyectoJustificacion" caption="Justificación">
                                                </dxi-column>
                                                <dxi-column dataField="ProyectoDescripcion" caption="Descripción">
                                                </dxi-column>
                                                <dxi-column dataField="ProyectoPropuestaSostenibilidad" caption="Propuesta sostenibilidad"></dxi-column>
                                                <dxi-column dataField="ProyectoCantidadPoblacionBeneficiada" caption="Cantidad población beneficiada"></dxi-column>
                                                <dxi-column dataField="ProyectoDescripcionPoblacionBeneficiada" caption="Descripción Población Beneficiada"></dxi-column>
                                                <dxi-column dataField="ProyectoResultadosEsperados" caption="Resultados Esperados"></dxi-column>
                                                <dxi-column dataField="ProyectoFechaRegistro" caption="Fecha Registro">
                                                </dxi-column>
                                                <!-- <dxi-column dataField="ProyectoFechaEdito" caption="Fecha Edito"></dxi-column>
                                        <dxi-column dataField="ProyectoUsuarioIdEdito" caption="Usuario Edito"></dxi-column>
                                        <dxi-column dataField="ProyectoUsuarioIdCreacion" caption="Usuario Creación"></dxi-column> -->
                                                <dxi-column dataField="ProyectoEstadoId" caption="Estado"></dxi-column>
                                                <dxi-column dataField="AnoId" caption="Año"></dxi-column>
                                                <dxi-column dataField="RegimenTributarioId" caption="Régimen tributario"></dxi-column>
                                                <dxi-column dataField="EntidadResponsableICA" caption="Entidad responsable ICA"></dxi-column>
                                                <dxi-column dataField="EntidadTarifaICA" caption="Tarifa ICA">
                                                </dxi-column>

                                                <div *dxTemplate="let d of 'accionCellTemplate'">
                                                    <div class="internal-grid-container">
                                                        <div>
                                                            <div>
                                                                <button type="button" matTooltip=" Nuevo" (click)="showAccionProyecto(d.data.ProyectoId, 'C')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                    <i class="fa fa-plus"></i>
                                                                </button>

                                                                <button type="button" matTooltip="Editar" (click)="showAccionProyecto(d.data.ProyectoId, 'U')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                    <i class="fa fa-edit"></i>
                                                                </button>

                                                                <button type="button" matTooltip="Borrar" (click)="borrarProyecto(d.data.ProyectoId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                                                    <i class="fa fa-remove"></i>
                                                                </button>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                                <dxo-summary>
                                                    <dxi-total-item column="EntidadId" summaryType="count" displayFormat="Cantidad: {0}">
                                                    </dxi-total-item>
                                                </dxo-summary>
                                                <dxo-paging [pageSize]="10"></dxo-paging>
                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                </dxo-pager>
                                            </dx-data-grid>

                                            <dx-popup #popupContainer [width]="1200" [height]="700" [showTitle]="true" title="Proyecto de sala {{sala.SalaNombre}}" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="popupVisibleProyecto" (onHiding)="popupHidingProyecto($event)">

                                                <div *dxTemplate="let data of 'content'">
                                                    <dx-scroll-view width="100%" height="100%">
                                                        <!-- #region Formulario proyecto -->
                                                        <div class="card">
                                                            <div class="card-body">
                                                                <div *ngIf="popupVisibleProyecto">
                                                                    <form ngNativeValidate #formCcProyecto="ngForm" (ngSubmit)="onSubmitProyecto(formCcProyecto.valid)" class="form p-t-20">

                                                                        <!-- #region Información de la persona encargada del proyecto -->
                                                                        <div class="activity-box m-t-30">
                                                                            <div class="date-devider">
                                                                                <span>Información de la persona
                                                                                    encargada</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="PrimerNombreEncargado">
                                                                                        Primer nombre
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="PrimerNombreEncargado" id="PrimerNombreEncargado" type="text" class="form-control" placeholder="Primer nombre encargado" [(ngModel)]="proyecto.ProyectoPrimerNombreEncargado" #PrimerNombreEncargadoControl="ngModel" required />
                                                                                        <ng-container *ngIf="!PrimerNombreEncargadoControl.valid && PrimerNombreEncargadoControl.touched">
                                                                                            <div style="color: red" *ngIf="PrimerNombreEncargadoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="OtrosNombresEncargado">
                                                                                        Otros nombres
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="OtrosNombresEncargado" id="OtrosNombresEncargado" type="text" class="form-control" placeholder="Otros nombres encargado" [(ngModel)]="proyecto.ProyectoOtrosNombresEncargado" #OtrosNombresEncargadoControl="ngModel" required />
                                                                                        <ng-container *ngIf="!OtrosNombresEncargadoControl.valid && OtrosNombresEncargadoControl.touched">
                                                                                            <div style="color: red" *ngIf="OtrosNombresEncargadoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="PrimerApellidoEncargado">
                                                                                        Primer apellido
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="PrimerApellidoEncargado" id="PrimerApellidoEncargado" type="text" class="form-control" placeholder="Primer apellido" [(ngModel)]="proyecto.ProyectoPrimerApellidoEncargado" #PrimerApellidoEncargadoControl="ngModel" required />
                                                                                        <ng-container *ngIf="!PrimerApellidoEncargadoControl.valid && PrimerApellidoEncargadoControl.touched">
                                                                                            <div style="color: red" *ngIf="PrimerApellidoEncargadoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="SegundoApellidoEncargado">
                                                                                        Segundo apellido
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="SegundoApellidoEncargado" id="SegundoApellidoEncargado" type="text" class="form-control" placeholder="Segundo apellido" [(ngModel)]="proyecto.ProyectoSegundoApellidoEncargado" #SegundoApellidoEncargadoControl="ngModel" required />
                                                                                        <ng-container *ngIf="!SegundoApellidoEncargadoControl.valid && SegundoApellidoEncargadoControl.touched">
                                                                                            <div style="color: red" *ngIf="SegundoApellidoEncargadoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="TelefonoFijo">Teléfono</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="TelefonoFijo" type="text" class="form-control" minlength="7" maxlength="7" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="proyecto.ProyectoTelefonoFijo" #ProyectoTelefonoFijoControl="ngModel"
                                                                                            required />

                                                                                        <ng-container *ngIf="!ProyectoTelefonoFijoControl.valid && ProyectoTelefonoFijoControl.touched">
                                                                                            <div style="color: red" *ngIf="ProyectoTelefonoFijoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <div style="color: red" *ngIf="ProyectoTelefonoFijoControl.errors.minlength" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="TelefonoMovil">Celular</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="TelefonoMovil" type="text" id="TelefonoMovil" class="form-control" placeholder="Celular" [(ngModel)]="proyecto.ProyectoTelefonoMovil" minlength="10" maxlength="10" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;"
                                                                                            #ProyectoTelefonoMovilControl="ngModel" required />
                                                                                        <ng-container *ngIf="!ProyectoTelefonoMovilControl.valid && ProyectoTelefonoMovilControl.touched">
                                                                                            <div style="color: red" *ngIf="ProyectoTelefonoMovilControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <div style="color: red" *ngIf="ProyectoTelefonoMovilControl.errors.minlength" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- #endregion -->

                                                                        <!-- #region Información bancaria de la entidad -->
                                                                        <div class="activity-box m-t-30">
                                                                            <div class="date-devider">
                                                                                <span>Información bancaria de la
                                                                                    entidad</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="EntidadBancaria">
                                                                                        Entidad bancaria
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="EntidadBancaria" id="EntidadBancaria" type="text" class="form-control" placeholder="Entidad bancaria" [(ngModel)]="proyecto.ProyectoEntidadBancaria" maxlength=200 #EntidadBancariaControl="ngModel" required />
                                                                                        <ng-container *ngIf="!EntidadBancariaControl.valid && EntidadBancariaControl.touched">
                                                                                            <div style="color: red" *ngIf="EntidadBancariaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <div style="color: red" *ngIf="ProyectoTelefonoFijoControl.errors.maxlength" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <div class="form-group">
                                                                                    <label for="TipoCuentaBancaria">Tipo
                                                                                        de cuenta bancaria</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="TipoCuentaBancaria" class="form-control" [(ngModel)]="proyecto.TipoCuentaBancariaId" #TipoCuentaBancariaControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaCuentaBancaria"
                                                                                                [ngValue]="item.idValorReferencia">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!TipoCuentaBancariaControl.valid && TipoCuentaBancariaControl.touched">
                                                                                            <div style="color: red" *ngIf="TipoCuentaBancariaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>


                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="NumeroCuentaBancaria">Número
                                                                                        de cuenta bancaria</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="NumeroCuentaBancaria" type="text" class="form-control" minlength="1" maxlength="20" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="proyecto.ProyectoNumeroCuentaBancaria" #NumeroCuentaBancariaControl="ngModel"
                                                                                            required />

                                                                                        <ng-container *ngIf="!NumeroCuentaBancariaControl.valid && NumeroCuentaBancariaControl.touched">
                                                                                            <div style="color: red" *ngIf="NumeroCuentaBancariaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <div style="color: red" *ngIf="NumeroCuentaBancariaControl.errors.minlength" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="exampleInputuname">Departamento</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select class="form-control" required name="Departamento" [(ngModel)]="proyecto.DepartamentoIdEntidadBancaria" (change)="mostrarMunicipiosProyectos()" #ProyectoDepartamentoControl="ngModel">
                                                                                            <option value="">
                                                                                                -- Seleccione el
                                                                                                departamento --
                                                                                            </option>
                                                                                            <option
                                                                                                *ngFor="let item of depListaProyecto"
                                                                                                [ngValue]="item.Id">
                                                                                                {{ item.Nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!ProyectoDepartamentoControl.valid && ProyectoDepartamentoControl.touched">
                                                                                            <div style="color: red" *ngIf="ProyectoDepartamentoControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="exampleInputuname">Municipio</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="Municipio" class="form-control" [(ngModel)]="proyecto.MunicipioIdEntidadBancaria" #ProyectoMunicipioControl="ngModel">
                                                                                            <option value="">
                                                                                                -- Seleccione el
                                                                                                municipio --
                                                                                            </option>
                                                                                            <option
                                                                                                *ngFor="let item of munListaProyecto"
                                                                                                [ngValue]="item.Id">
                                                                                                {{ item.Nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!ProyectoMunicipioControl.valid && ProyectoMunicipioControl.touched">
                                                                                            <div style="color: red" *ngIf="ProyectoMunicipioControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <!-- #endregion -->

                                                                        <!-- #region Régimen tributario -->
                                                                        <div class="activity-box m-t-30">
                                                                            <div class="date-devider">
                                                                                <span>Régimen tributario</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="RegimenTributario">Régimen
                                                                                        tributario</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="RegimenTributario" class="form-control" [(ngModel)]="proyecto.RegimenTributarioId" #RegimenTributarioControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaRegimenTributario"
                                                                                                [ngValue]="item.idValorReferencia">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!RegimenTributarioControl.valid && RegimenTributarioControl.touched">
                                                                                            <div style="color: red" *ngIf="RegimenTributarioControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="EntidadResponsableICA">Entidad
                                                                                        resaponsable ICA</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-location-arrow"></i>
                                                                                        </div>
                                                                                        <select name="EntidadResponsableICA" class="form-control" [(ngModel)]="proyecto.EntidadResponsableICA" #RespICAControl="ngModel" required>
                                                                                            <option
                                                                                                *ngFor="let item of listaEntidadResponsableICA"
                                                                                                [ngValue]="item.nombre">
                                                                                                {{ item.nombre }}
                                                                                            </option>
                                                                                        </select>
                                                                                        <ng-container *ngIf="!RespICAControl.valid && RespICAControl.touched">
                                                                                            <div style="color: red" *ngIf="RespICAControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-4">
                                                                                <div class="form-group">
                                                                                    <label for="EntidadTarifaICA">
                                                                                        Tarifa ICA
                                                                                    </label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="EntidadTarifaICA" id="EntidadTarifaICA" type="text" class="form-control" placeholder="Tarifa ICA" [(ngModel)]="proyecto.EntidadTarifaICA" required #EntidadTarifaICAControl="ngModel" />
                                                                                        <ng-container *ngIf="!EntidadTarifaICAControl.valid && EntidadTarifaICAControl.touched">
                                                                                            <div style="color: red" *ngIf="EntidadTarifaICAControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- #endregion -->

                                                                        <!-- #region Documento de proyecto -->
                                                                        <div *ngIf="displayProyectoDocumento">
                                                                            <div class="row animated fadeIn">
                                                                                <div class="col-md-12 col-xl-12">
                                                                                    <div class="card">
                                                                                        <div class="card-body">

                                                                                            <div class="activity-box m-t-30">
                                                                                                <div class="date-devider">
                                                                                                    <span>Documentos del proyecto</span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <br />
                                                                                            <hr />
                                                                                            <div class="row align-content-center" *ngIf="displayProyectoDocumento">
                                                                                                <div class="col-md-2">
                                                                                                    <button matTooltip="Nuevo" type="button" (click)="showAccionProyectoDocumento(null, 'C')" class="btn btn-success m-b-0 button-tabla">
                                                                                                        <i class="fa fa-plus"></i>
                                                                                                        Agregar
                                                                                                        Documento
                                                                                                    </button>

                                                                                                </div>
                                                                                            </div>

                                                                                            <dx-data-grid id="gridProyectoDocumento" (onRowInserting)="showAccionProyectoDocumento(null, 'C')" [dataSource]="listaProyectoDocumento" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="false" [columnAutoWidth]="true" keyExpr="DocumentoProyectoId">
                                                                                                <!-- <dxo-editing mode="form" [allowAdding]="true"><dxo-texts addRow="Nuevo"></dxo-texts></dxo-editing> -->
                                                                                                <dxo-export [enabled]="true" fileName="Sala Proyecto Documento">
                                                                                                </dxo-export>
                                                                                                <dxo-filter-row [visible]="true">
                                                                                                </dxo-filter-row>
                                                                                                <dxo-header-filter [visible]="true">
                                                                                                </dxo-header-filter>
                                                                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                                                                </dxo-grouping>
                                                                                                <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                                                                                                </dxo-group-panel>
                                                                                                <dxo-search-panel [visible]="true" placeholder="Buscar...">
                                                                                                </dxo-search-panel>
                                                                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                                                                </dxo-remote-operations>
                                                                                                <dxo-column-chooser [enabled]="true" mode="select">
                                                                                                </dxo-column-chooser>
                                                                                                <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center" [width]="200">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="DocumentoProyectoId" caption="Documento id" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="ProyectoId" caption="Proyecto id" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="ArchivoId" caption="Archivo id" [width]="150"></dxi-column>
                                                                                                <dxi-column dataField="NombreTipoDocumento" caption="Tipo Documento" [width]="350">
                                                                                                </dxi-column>

                                                                                                <!-- <dxi-column dataField="DocumentoProyectoNombre" caption="Nombre documento"> </dxi-column> -->
                                                                                                <dxi-column cellTemplate="linkcellTemplate" caption="Nombre documento" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="DocumentoProyectoFechaRegistro" caption="Fecha registro" [width]="150">
                                                                                                </dxi-column>
                                                                                                <!-- <dxi-column dataField="DocumentoProyectoUsuarioIdCreacion" caption="Usuario creacion id">
                                                                                                                                                                                                                                                                        </dxi-column> -->
                                                                                                <dxi-column dataField="DocumentoProyectoEstadoId" caption="Estado" [width]="100">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="DocumentoProyectoObservacionesRevision" caption="Observaciones" [width]="200">
                                                                                                </dxi-column>

                                                                                                <div *dxTemplate="let d of 'linkcellTemplate'">
                                                                                                    <button type="button" class="btn btn-link" matTooltip="Descarga" (click)="descargarArchivoDocumento(d.data.DocumentoProyectoId)">
                                                                                                        Ver Documento 
                                                                                                    </button>
                                                                                                </div>


                                                                                                <div *dxTemplate="let d of 'accionCellTemplate'">
                                                                                                    <div class="internal-grid-container">
                                                                                                        <div>
                                                                                                            <button type="button" matTooltip="Nuevo" (click)="showAccionProyectoDocumento(d.data.DocumentoProyectoId, 'C')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-plus"></i>
                                                                                                            </button>

                                                                                                            <button type="button" matTooltip="Editar" (click)="showAccionProyectoDocumento(d.data.DocumentoProyectoId, 'U')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-edit"></i>
                                                                                                            </button>

                                                                                                            <button type="button" matTooltip="Borrar" (click)="borrarProyectoDocumento(d.data.DocumentoProyectoId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-remove"></i>
                                                                                                            </button>

                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <dxo-summary>
                                                                                                    <dxi-total-item column="DocumentoProyectoId" summaryType="count" displayFormat="Cantidad: {0}">
                                                                                                    </dxi-total-item>
                                                                                                </dxo-summary>
                                                                                                <dxo-paging [pageSize]="10">
                                                                                                </dxo-paging>
                                                                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                                                                </dxo-pager>
                                                                                            </dx-data-grid>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- #endregion  -->

                                                                        <!-- #region Proyecto -->
                                                                        <div class="activity-box m-t-30">
                                                                            <div class="date-devider">
                                                                                <span>Proyecto</span>
                                                                            </div>
                                                                        </div>

                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Necesidad de Sala</label>
                                                                                    <textarea class="form-control" placeholder="Necesidad de la sala para la ejecución de su propuesta misional" matTooltip="Nuevo" rows="5" name="NecesidadSala" maxlength="3000" [(ngModel)]="proyecto.ProyectoNecesidadSala" #NecesidadSalaControl="ngModel"
                                                                                        required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!NecesidadSalaControl.valid && NecesidadSalaControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="NecesidadSalaControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>
                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoNecesidadSala.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoNecesidadSala.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Objetivo general</label>
                                                                                    <textarea class="form-control" rows="5" name="ObjetivoGeneral" maxlength="3000" [(ngModel)]="proyecto.ProyectoObjetivoGeneral" #ObjetivoGeneralControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!ObjetivoGeneralControl.valid && ObjetivoGeneralControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="ObjetivoGeneralControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoObjetivoGeneral.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoObjetivoGeneral.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Objetivo específicos</label>
                                                                                    <textarea class="form-control" rows="5" name="ObjetivoEspecificos" maxlength="3000" [(ngModel)]="proyecto.ProyectoObjetivosEspecificos" #ObjetivoEspecificosControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!ObjetivoEspecificosControl.valid && ObjetivoEspecificosControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="ObjetivoEspecificosControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoObjetivosEspecificos.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoObjetivosEspecificos.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Justificación</label>
                                                                                    <textarea class="form-control" rows="5" placeholder="Justificación del apoyo" name="Justificacion" maxlength="3000" [(ngModel)]="proyecto.ProyectoJustificacion" #JustificacionControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!JustificacionControl.valid && JustificacionControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="JustificacionControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoJustificacion.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoJustificacion.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Descripción</label>
                                                                                    <textarea class="form-control" rows="5" placeholder="Descripción del proyecto a apoyar en el marco de Salas Concertadas. Recuerde que las acciones que defina para ejecutar su proyecto podrán incluir, de acuerdo con sus intereses, los siguientes componentes:  creación, formación, divulgación, gestión de públicos, circuitos de programación artística, investigación y una propuesta de procesos artísticos comunitarios."
                                                                                        name="Descripción" maxlength="3000" [(ngModel)]="proyecto.ProyectoDescripcion" #DescripcionControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!DescripcionControl.valid && DescripcionControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="DescripcionControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoDescripcion.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoDescripcion.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Propuesta
                                                                                        sostenibilidad</label>
                                                                                    <textarea class="form-control" rows="5" placeholder="Propuesta de sostenibilidad del proyecto" name="PropuestaSostenibilidad" maxlength="3000" [(ngModel)]="proyecto.ProyectoPropuestaSostenibilidad" #PropuestaSostenibilidadControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!PropuestaSostenibilidadControl.valid && PropuestaSostenibilidadControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="PropuestaSostenibilidadControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoPropuestaSostenibilidad.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoPropuestaSostenibilidad.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Descripción población
                                                                                        beneficiada</label>
                                                                                    <textarea class="form-control" rows="5" name="DescripcionPoblacionBeneficiada" maxlength="3000" [(ngModel)]="proyecto.ProyectoDescripcionPoblacionBeneficiada" #DescripcionPoblacionBeneficiadaControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!DescripcionPoblacionBeneficiadaControl.valid && DescripcionPoblacionBeneficiadaControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="DescripcionPoblacionBeneficiadaControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoDescripcionPoblacionBeneficiada.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoDescripcionPoblacionBeneficiada.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label for="CantidadPoblacionBeneficiada">Cantidad
                                                                                        población beneficiada</label>
                                                                                    <div class="input-group">
                                                                                        <div class="input-group-addon">
                                                                                            <i class="ti-user"></i>
                                                                                        </div>
                                                                                        <input name="CantidadPoblacionBeneficiada" type="text" class="form-control" minlength="1" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="proyecto.ProyectoCantidadPoblacionBeneficiada" #CantidadPoblacionBeneficiadaControl="ngModel"
                                                                                            required />

                                                                                        <ng-container *ngIf="!CantidadPoblacionBeneficiadaControl.valid && CantidadPoblacionBeneficiadaControl.touched">
                                                                                            <div style="color: red" *ngIf="CantidadPoblacionBeneficiadaControl.errors.required" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                            <div style="color: red" *ngIf="CantidadPoblacionBeneficiadaControl.errors.minlength" class="error-message">
                                                                                                <strong>&nbsp; *
                                                                                                </strong>
                                                                                            </div>
                                                                                        </ng-container>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <label>Resultados esperados</label>
                                                                                    <textarea class="form-control" rows="5" name="ResultadosEsperados" maxlength="3000" [(ngModel)]="proyecto.ProyectoResultadosEsperados" #ResultadosEsperadosControl="ngModel" required>
                                                                                        </textarea>
                                                                                    <ng-container *ngIf="!ResultadosEsperadosControl.valid && ResultadosEsperadosControl.touched">
                                                                                        <div style="color: red; font-size: 14px" *ngIf="ResultadosEsperadosControl.errors.required" class="error-message">
                                                                                            <p size="6">* Este campo es requerido
                                                                                            </p>
                                                                                        </div>
                                                                                    </ng-container>

                                                                                    <div style="color: red; font-size: 14px;" *ngIf="proyecto.ProyectoResultadosEsperados.length >= 3000" class="error-message">
                                                                                        <p>* Máximo caracteres permitidos {{proyecto.ProyectoResultadosEsperados.length}}
                                                                                        </p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- #endregion -->

                                                                        <!-- #region Funciones de proyecto -->
                                                                        <div *ngIf="displayListaFuncionProyecto">
                                                                            <div class="row animated fadeIn">
                                                                                <div class="col-md-12 col-xl-12">
                                                                                    <div class="card">
                                                                                        <div class="card-body">

                                                                                            <div class="activity-box m-t-30">
                                                                                                <div class="date-devider">
                                                                                                    <span>Funciones del proyecto</span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <br />
                                                                                            <hr />
                                                                                            <div class="row align-content-center" *ngIf="displayListaFuncionProyecto">
                                                                                                <div class="col-md-2">
                                                                                                    <button matTooltip="Nuevo" type="button" (click)="showAccionProyectoFuncion(null, 'C')" class="btn btn-success m-b-0 button-tabla">
                                                                                                        <i class="fa fa-plus"></i>
                                                                                                        Agregar Función
                                                                                                    </button>

                                                                                                </div>
                                                                                            </div>

                                                                                            <dx-data-grid id="gridFuncionProyecto" (onRowInserting)="showAccionProyectoFuncion(null, 'C')" [dataSource]="listaProyectoFuncion" showBorders="true" [rowAlternationEnabled]="true" [columnHidingEnabled]="false" [columnAutoWidth]="true" keyExpr="FuncionId">
                                                                                                <!-- <dxo-editing mode="form" [allowAdding]="true"></dxo-editing> -->
                                                                                                <dxo-export [enabled]="true" fileName="Sala Funcion Proyecto">
                                                                                                </dxo-export>
                                                                                                <dxo-filter-row [visible]="true">
                                                                                                </dxo-filter-row>
                                                                                                <dxo-header-filter [visible]="true">
                                                                                                </dxo-header-filter>
                                                                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                                                                </dxo-grouping>
                                                                                                <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                                                                                                </dxo-group-panel>
                                                                                                <dxo-search-panel [visible]="true" placeholder="Buscar...">
                                                                                                </dxo-search-panel>
                                                                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                                                                </dxo-remote-operations>
                                                                                                <dxo-column-chooser [enabled]="true" mode="select">
                                                                                                </dxo-column-chooser>
                                                                                                <dxi-column caption="Acciones" cellTemplate="accionCellTemplate" alignment="center" [width]="200">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="ProyectoId" caption="Proyecto" [width]="100">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionRealizada" caption="Función realizada" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionFecha" caption="Fecha" [width]="100">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionAbierta" caption="Abierta" [width]="100">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionNombre" caption="Funcion nombre" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionCodigoPULEP" caption="Código PULEP" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionNombreGrupo" caption="Nombre grupo" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionGrupoPlanta" caption="Función grupo planta" [width]="200">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionCantidad" caption="Función cantidad" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="DisciplinaArtisticaId" caption="Disciplina artística Id" [width]="200">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="PaisIdProcedenciaGrupo" caption="Pais Id procedenciag grupo" [width]="250">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="MunicipioIdProcedenciaGrupo" caption="Minicipio Id procedencia Grupo" [width]="250">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionCiudadProcedenciaGrupoOtroPais" caption="Funcion ciudad procedencia grupoo tro pais" [width]="300">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionFechaRegistro" caption="Fecha registro" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionFechaEdito" caption="FechaEdito" [width]="100">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionUsuarioIdEdito" caption="Usuario Id Edito" [width]="150">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="FuncionUsuarioIdCreacion" caption="Función usuario Id creación" [width]="250">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="TipoFuncionId" caption="Tipo de función" [width]="150">
                                                                                                </dxi-column>

                                                                                                <div *dxTemplate="let d of 'accionCellTemplate'">
                                                                                                    <div class="internal-grid-container">
                                                                                                        <div>
                                                                                                            <button type="button" matTooltip=" Nuevo" (click)="showAccionProyectoFuncion(d.data.FuncionId, 'C')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-plus"></i>
                                                                                                            </button>

                                                                                                            <button type="button" matTooltip="Editar" (click)="showAccionProyectoFuncion(d.data.FuncionId, 'U')" class="btn btn-success waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-edit"></i>
                                                                                                            </button>

                                                                                                            <button type="button" matTooltip="Borrar" (click)="borrarProyectoFuncion(d.data.FuncionId)" class="btn btn-danger waves-effect waves-light m-r-10">
                                                                                                                <i class="fa fa-remove"></i>
                                                                                                            </button>

                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <dxo-summary>
                                                                                                    <dxi-total-item column="FuncionId" summaryType="count" displayFormat="Cantidad: {0}">
                                                                                                    </dxi-total-item>
                                                                                                </dxo-summary>
                                                                                                <dxo-paging [pageSize]="10">
                                                                                                </dxo-paging>
                                                                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                                                                </dxo-pager>
                                                                                            </dx-data-grid>

                                                                                            <!-- <div class="activity-box m-t-30">
                                                                                                                                                                            <div class="date-devider">
                                                                                                                                                                                <span>Fin Proyectos</span>
                                                                                                                                                                            </div>
                                                                                                                                                                        </div>
                                                                                                                                                                        <hr /> -->
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- #endregion -->

                                                                        <!-- #region Cronograma de proyecto -->
                                                                        <div *ngIf="displayProyectoCronograma">
                                                                            <div class="row animated fadeIn">
                                                                                <div class="col-md-12">
                                                                                    <div class="card">
                                                                                        <div class="card-body">

                                                                                            <div class="activity-box m-t-30">
                                                                                                <div class="date-devider">
                                                                                                    <span>Cronograma del proyecto</span>
                                                                                                </div>
                                                                                                <br>
                                                                                                <span>
                                                                                                        Cronograma General. Hasta cinco (5) meses. Debe incluir todas las actividades que realizará la sala durante la ejecución del proyecto, de acuerdo con la descripción y los objetivos planteados. 
                                                                                                    </span>
                                                                                            </div>
                                                                                            <br />
                                                                                            <hr />
                                                                                            <dx-data-grid id="gridCronograma" (onRowUpdated)="actualizarCronograma($event)" (onRowInserted)="agregarCronograma($event)" (onRowRemoved)="borrarCronograma($event)" [allowColumnReordering]="true" [allowColumnResizing]="true" [dataSource]="listaProyectoCronograma"
                                                                                                showBorders="true" [rowAlternationEnabled]="true" [columnAutoWidth]="true" keyExpr="CronogramaId">

                                                                                                <dxo-export [enabled]="true" fileName="Cronograma de proyecto de sala">
                                                                                                </dxo-export>
                                                                                                <dxo-filter-row [visible]="false">
                                                                                                </dxo-filter-row>
                                                                                                <dxo-header-filter [visible]="false">
                                                                                                </dxo-header-filter>
                                                                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                                                                </dxo-grouping>
                                                                                                <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos">
                                                                                                </dxo-group-panel>
                                                                                                <dxo-search-panel [visible]="true" placeholder="Buscar...">
                                                                                                </dxo-search-panel>
                                                                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                                                                </dxo-remote-operations>
                                                                                                <dxo-editing mode="batch" [allowUpdating]="true" [allowAdding]="true" [allowDeleting]="true" [selectTextOnEditStart]="selectTextOnEditStart" [startEditAction]="startEditAction">

                                                                                                </dxo-editing>

                                                                                                <dxo-column-chooser [enabled]="true" mode="select">
                                                                                                </dxo-column-chooser>
                                                                                                <!-- <dxi-column dataField="CronogramaId" caption="Id">
                                                                                                </dxi-column> -->
                                                                                                <dxi-column dataField="CronogramaActividad" caption="Actividad">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="CronogramaFechaInicio" caption="Fecha Inicio" dataType="date">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="CronogramaFechaFin" caption="Fecha Fin" dataType="date">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="CronogramaFechaRegistro" caption="Fecha Registro">
                                                                                                </dxi-column>
                                                                                                <!-- <dxi-column dataField="CronogramaFechaEdito" caption="Fecha Edito"></dxi-column>
                                                                                                                                                                            <dxi-column dataField="CronogramaUsuarioIdEdito" caption="Usuario Edito"></dxi-column>
                                                                                                                                                                            <dxi-column dataField="CronogramaUsuarioIdCreacion" caption="Usuario Creación"></dxi-column> -->
                                                                                                <dxo-summary>
                                                                                                    <dxi-total-item column="CronogramaId" summaryType="count" displayFormat="Cantidad: {0}">
                                                                                                    </dxi-total-item>
                                                                                                </dxo-summary>
                                                                                                <dxo-paging [pageSize]="10">
                                                                                                </dxo-paging>
                                                                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                                                                </dxo-pager>

                                                                                            </dx-data-grid>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- #endregion -->

                                                                        <!-- #region Presupuesto de proyecto -->
                                                                        <div *ngIf="displayProyectoPresupuesto">
                                                                            <div class="row animated fadeIn">
                                                                                <div class="col-md-12">
                                                                                    <div class="card">
                                                                                        <div class="card-body">

                                                                                            <div class="activity-box m-t-30">
                                                                                                <div class="date-devider">
                                                                                                    <span>Presupuesto del proyecto</span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <span>
                                                                                                Tenga en cuenta que este presupuesto debe corresponder con las actividades planteadas. Incluya en la casilla de costo de la actividad con cargo al Ministerio solo los recursos que posiblemente se requieran apoyar. Tenga en cuenta que sólo deberá incluir las actividades a financiar que se realizarán dentro de los tiempos de ejecución de la presente convocatoria (máximo 5 meses contados a partir de la legalización del convenio hasta el 22 de octubre de 2021).
                                                                                            </span>
                                                                                            <br />
                                                                                            <hr />
                                                                                            <dx-data-grid id="gridPresupuesto" (onRowUpdated)="actualizarPresupuesto($event)" (onRowInserted)="agregarPresupuesto($event)" (onRowRemoved)="borrarPresupuesto($event)" [allowColumnReordering]="true" [allowColumnResizing]="true" [dataSource]="listaProyectoPresupuesto"
                                                                                                showBorders="true" [rowAlternationEnabled]="true" [columnAutoWidth]="true" keyExpr="PresupuestoId">

                                                                                                <dxo-export [enabled]="true" fileName="Presupuesto de proyecto de sala">
                                                                                                </dxo-export>
                                                                                                <dxo-filter-row [visible]="false">
                                                                                                </dxo-filter-row>
                                                                                                <dxo-header-filter [visible]="false">
                                                                                                </dxo-header-filter>
                                                                                                <dxo-grouping [contextMenuEnabled]="true" expandMode="rowClick">
                                                                                                </dxo-grouping>
                                                                                                <!-- <dxo-group-panel [visible]="true" emptyPanelText="Use el contexto de menu de los encabezados de columnas para agrupar datos"></dxo-group-panel> -->
                                                                                                <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar...">
                                                                                                </dxo-search-panel>
                                                                                                <dxo-remote-operations [sorting]="true" [paging]="true">
                                                                                                </dxo-remote-operations>
                                                                                                <dxo-editing mode="batch" [allowUpdating]="true" [allowAdding]="true" [allowDeleting]="true" [selectTextOnEditStart]="selectTextOnEditStart" [startEditAction]="startEditAction">
                                                                                                </dxo-editing>

                                                                                                <dxo-column-chooser [enabled]="true" mode="select">
                                                                                                </dxo-column-chooser>
                                                                                                <!-- <dxi-column dataField="PresupuestoId" caption="Id">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="ProyectoId" caption="ProyectoId">
                                                                                                </dxi-column> -->
                                                                                                <dxi-column dataField="PresupuestoComponente" caption="Componente">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="PresupuestoTipoGasto" caption="Tipo gasto">
                                                                                                </dxi-column>
                                                                                                <dxi-column dataField="PresupuestoValor" caption="Valor">
                                                                                                </dxi-column>

                                                                                                <dxo-summary>
                                                                                                    <dxi-total-item column="PresupuestoId" summaryType="count" displayFormat="Cantidad: {0}">
                                                                                                    </dxi-total-item>
                                                                                                </dxo-summary>
                                                                                                <dxo-paging [pageSize]="10">
                                                                                                </dxo-paging>
                                                                                                <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20, 40]" [visible]="true" [showInfo]="true" [showNavigationButtons]="true">
                                                                                                </dxo-pager>

                                                                                            </dx-data-grid>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- #endregion -->



                                                                        <!-- #region Estado proyecto -->

                                                                        <div *ngIf="displayEstadoProyecto" class="row animated fadeIn">
                                                                            <div class="col-md-12 col-xl-12">
                                                                                <div class="card">
                                                                                    <div class="card-body">
                                                                                        <div class="activity-box m-t-30">
                                                                                            <div class="date-devider">
                                                                                                <span>Estado del proyecto</span>
                                                                                            </div>
                                                                                        </div>
                                                                                        <br />
                                                                                        <div *ngIf="gestionaActores">
                                                                                            <div class="row p-t-20">
                                                                                                <div class="col-md-6">
                                                                                                    <label for="exampleInputuname">Estado proyecto</label>
                                                                                                    <div class="input-group">
                                                                                                        <div class="input-group-addon"><i class="ti-agenda"></i></div>
                                                                                                        <select name="ProyectoEstadoId" class="form-control" [(ngModel)]="proyecto.ProyectoEstadoId" required>
                                                                                                            <option *ngFor="let item of listaTipoEstadoProyecto"
                                                                                                                [ngValue]="item.idValorReferencia">
                                                                                                                {{item.nombre}}</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <br>
                                                                                                    <div class="col-md-2">
                                                                                                        <button type="button" (click)="aprobarProyecto(proyecto.ProyectoId)" class="btn waves-effect waves-light btn-info">Cambiar Estado
                                                                                                            <i class="fa fa-arrow-right"></i></button>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="col-md-6">
                                                                                                    <div class="form-group">
                                                                                                        <label>Observaciones estado</label>
                                                                                                        <textarea class="form-control" rows="8" name="ProyectoObservaciones" [(ngModel)]="proyecto.ProyectoObservaciones"></textarea>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div *ngIf="!gestionaActores" class="row p-t-20">
                                                                                            <div class="col-md-6">
                                                                                                <label for="exampleInputuname"> 
                                                                                                    <strong>Estado:</strong>
                                                                                                    {{proyecto.ProyectoEstadoNombre}}
                                                                                                </label>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <!-- #endregion -->


                                                                        <div class="row p-t-20">
                                                                            <div class="col-md-4"></div>
                                                                            <div class="col-md-2">
                                                                                <button type="submit" class="btn waves-effect waves-light btn-success">
                                                                                    Guardar
                                                                                    <i class="fa fa-save"></i>
                                                                                </button>
                                                                            </div>

                                                                            <div class="col-md-2">
                                                                                <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showPanelVolverProyecto()">
                                                                                    <i class="fa fa-backward"></i>
                                                                                    Cancelar
                                                                                </button>
                                                                            </div>
                                                                            <div class="col-md-4"></div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- #endregion -->
                                                    </dx-scroll-view>
                                                </div>
                                            </dx-popup>

                                            <!-- #region función de proyecto -->
                                            <dx-popup [width]="900" [height]="700" [showTitle]="true" title="Función de proyecto de sala {{sala.ProyectoId}}" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="popupVisibleFuncionProyecto" (onHiding)="popupHidingFuncionProyecto($event)">
                                                <div *dxTemplate="let data of 'content'">
                                                    <dx-scroll-view width="100%" height="100%">
                                                        <!-- #region Formulario Proyecto Función -->
                                                        <div class="col-12">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div *ngIf="popupVisibleFuncionProyecto">
                                                                        <form ngNativeValidate #formCcFuncion="ngForm" (ngSubmit)="onSubmitProyectoFuncion(formCcFuncion.valid)">
                                                                            <div class="activity-box m-t-30">
                                                                                <div class="date-devider">
                                                                                    <span>Descripción de la
                                                                                        función</span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="ProyectoFuncionRealizada">Función
                                                                                            Propuesta</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="ProyectoFuncionRealizada" class="form-control" [(ngModel)]="funcion.FuncionRealizada" #ProyectoFuncionRealizadaControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of listaProyectoFuncionRealizada"
                                                                                                    [ngValue]="item.nombre">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!ProyectoFuncionRealizadaControl.valid && ProyectoFuncionRealizadaControl.touched">
                                                                                                <div style="color: red" *ngIf="ProyectoFuncionRealizadaControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="col-md-4">
                                                                                    <div class="form-group">
                                                                                        <label for="exampleInputuname">Fecha</label>
                                                                                        <div class="input-group flex-wrap">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-time"></i>
                                                                                            </div>
                                                                                            <input required type="text" [(ngModel)]="funcion.FuncionFecha" [minDate]="{ year: 1900, month: 1, day: 1 }" [maxDate]="maxDate" placeholder="mm/dd/aaaa" name="FuncionFecha" ngbDatepicker #FuncionFecha="ngbDatepicker" />
                                                                                            <div class="input-group-addon bg-default" (click)="FuncionFecha.toggle()">
                                                                                                <span class="ti-calendar"></span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="ProyectoFuncionAbierta">Función
                                                                                            abierta al público</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="ProyectoFuncionAbierta" class="form-control" [(ngModel)]="funcion.FuncionAbierta" #ProyectoFuncionAbiertaControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of listaProyectoFuncionAbierta"
                                                                                                    [ngValue]="item.nombre">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!ProyectoFuncionAbiertaControl.valid && ProyectoFuncionAbiertaControl.touched">
                                                                                                <div style="color: red" *ngIf="ProyectoFuncionAbiertaControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="FuncionNombre">
                                                                                            Función nombre
                                                                                        </label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-user"></i>
                                                                                            </div>
                                                                                            <input name="FuncionNombre" id="FuncionNombre" type="text" class="form-control" placeholder="Nombre" [(ngModel)]="funcion.FuncionNombre" #FuncionNombreControl="ngModel" required />
                                                                                            <ng-container *ngIf="!FuncionNombreControl.valid && FuncionNombreControl.touched">
                                                                                                <div style="color: red" *ngIf="FuncionNombreControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <!-- <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="FuncionCodigoPULEP">
                                                                                            Código PULEP
                                                                                        </label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-user"></i>
                                                                                            </div>
                                                                                            <input name="FuncionCodigoPULEP" id="FuncionCodigoPULEP" type="text" class="form-control" placeholder="Código PULEP" [(ngModel)]="funcion.FuncionCodigoPULEP" #FuncionCodigoPULEPControl="ngModel" />
                                                                                            <ng-container *ngIf="!FuncionCodigoPULEPControl.valid && FuncionCodigoPULEPControl.touched">
                                                                                                <div style="color: red" *ngIf="FuncionCodigoPULEPControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div> -->
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <label for="FuncionNombreGrupo">
                                                                                            Nombre grupo
                                                                                        </label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-user"></i>
                                                                                            </div>
                                                                                            <input name="FuncionNombreGrupo" id="FuncionNombreGrupo" type="text" class="form-control" placeholder="Nombre de grupo" [(ngModel)]="funcion.FuncionNombreGrupo" #FuncionNombreGrupoControl="ngModel" required />
                                                                                            <ng-container *ngIf="!FuncionNombreGrupoControl.valid && FuncionNombreGrupoControl.touched">
                                                                                                <div style="color: red" *ngIf="FuncionNombreGrupoControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="ProyectoFuncionGrupoPlanta">Grupo
                                                                                            planta</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="ProyectoFuncionGrupoPlanta" class="form-control" [(ngModel)]="funcion.FuncionGrupoPlanta" #ProyectoFuncionGrupoPlantaControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of listaProyectoFuncionGrupoPlanta"
                                                                                                    [ngValue]="item.nombre">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!ProyectoFuncionGrupoPlantaControl.valid && ProyectoFuncionGrupoPlantaControl.touched">
                                                                                                <div style="color: red" *ngIf="ProyectoFuncionGrupoPlantaControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="FuncionCantidad">Cantidad de Funciones Realizadas</label>
                                                                                        <div class="input-group">
                                                                                            <!-- <div class="input-group-addon">
                                                                                                <i class="ti-user"></i>
                                                                                            </div> -->
                                                                                            <input name="FuncionCantidad" type="text" class="form-control" minlength="1" onkeypress="if (event.keyCode < 48 || event.keyCode > 57) event.returnValue = false;" [(ngModel)]="funcion.FuncionCantidad" #FuncionCantidadControl="ngModel" required />

                                                                                            <ng-container *ngIf="!FuncionCantidadControl.valid && FuncionCantidadControl.touched">
                                                                                                <div style="color: red" *ngIf="FuncionCantidadControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                                <!-- <div style="color: red"
                                                                                                        *ngIf="SalaTelefonoControl.errors.minlength"
                                                                                                        class="error-message">
                                                                                                        <strong>&nbsp; * </strong>
                                                                                                    </div> -->
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-6">
                                                                                    <div class="form-group">
                                                                                        <label for="DisciplinaArtisticaFuncion">Disciplina
                                                                                            artística</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="DisciplinaArtisticaFuncion" class="form-control" [(ngModel)]="funcion.DisciplinaArtisticaId" #DisciplinaArtisticaFuncionControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of listaDisciplinaArtisticaProyectoFuncion"
                                                                                                    [ngValue]="item.idValorReferencia">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!DisciplinaArtisticaFuncionControl.valid && DisciplinaArtisticaFuncionControl.touched">
                                                                                                <div style="color: red" *ngIf="DisciplinaArtisticaFuncionControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-4">
                                                                                    <div class="form-group">
                                                                                        <label for="PaisFuncion">País de procedencia del grupo</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="PaisFuncion" class="form-control" [(ngModel)]="funcion.PaisIdProcedenciaGrupo" #PaisFuncionControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of paisesListaProyectoFuncion"
                                                                                                    [ngValue]="item.Id">
                                                                                                    {{ item.Nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!PaisFuncionControl.valid && PaisFuncionControl.touched">
                                                                                                <div style="color: red" *ngIf="PaisFuncionControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4">
                                                                                    <div class="form-group">
                                                                                        <label for="DepartamentoFuncion">Departamento de procedencia del grupo</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="DepartamentoFuncion" class="form-control" [(ngModel)]="funcion.DepartamentoIdProcedenciaGrupo" (change)="mostrarMunicipiosProyectoFuncion()" #DepartamentoFuncionControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of depListaProyectoFuncion"
                                                                                                    [ngValue]="item.Id">
                                                                                                    {{ item.Nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!DepartamentoFuncionControl.valid && DepartamentoFuncionControl.touched">
                                                                                                <div style="color: red" *ngIf="DepartamentoFuncionControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-4">
                                                                                    <div class="form-group">
                                                                                        <label for="MunicipioFuncion">Municipio de procedencia del grupo</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="MunicipioFuncion" class="form-control" [(ngModel)]="funcion.MunicipioIdProcedenciaGrupo" #MunicipioFuncionControl="ngModel" required>
                                                                                                <option
                                                                                                    *ngFor="let item of munListaProyectoFuncion"
                                                                                                    [ngValue]="item.Id">
                                                                                                    {{ item.Nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!MunicipioFuncionControl.valid && MunicipioFuncionControl.touched">
                                                                                                <div style="color: red" *ngIf="MunicipioFuncionControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <label>Ciudad procedencia grupo
                                                                                            otro pais</label>
                                                                                        <textarea class="form-control" rows="5" name="FuncionCiudadProcedenciaGrupoOtroPais" maxlength="200" [(ngModel)]="funcion.FuncionCiudadProcedenciaGrupoOtroPais" #FuncionCiudadProcedenciaGrupoOtroPaisControl="ngModel" required>
                                                                                            </textarea>
                                                                                        <ng-container *ngIf="!FuncionCiudadProcedenciaGrupoOtroPaisControl.valid && FuncionCiudadProcedenciaGrupoOtroPaisControl.touched">
                                                                                            <div style="color: red; font-size: 14px" *ngIf="FuncionCiudadProcedenciaGrupoOtroPaisControl.errors.required" class="error-message">
                                                                                                <p size="6">* Este campo es requerido</p>
                                                                                            </div>
                                                                                        </ng-container>

                                                                                        <div style="color: red; font-size: 14px;" *ngIf="funcion.FuncionCiudadProcedenciaGrupoOtroPais.length >= 200" class="error-message">
                                                                                            <p>* Máximo caracteres permitidos {{funcion.FuncionCiudadProcedenciaGrupoOtroPais.length}}
                                                                                            </p>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <!-- <div class="form-group">
                                                                                        <label for="Municipio">Tipo de función</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-location-arrow"></i>
                                                                                            </div>
                                                                                            <select name="TipoFuncion" class="form-control"
                                                                                                [(ngModel)]="funcion.TipoFuncionId" required #MunicipioEntidadBancariaControl="ngModel">
                                                                                                <option *ngFor="let item of munListaProyecto"
                                                                                                    [ngValue]="item.Id">
                                                                                                    {{ item.Nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <ng-container *ngIf="!SalaMunicipioControl.valid && SalaMunicipioControl.touched">
                                                                                                <div style="color: red"
                                                                                                    *ngIf="SalaMunicipioControl.errors.required"
                                                                                                    class="error-message">
                                                                                                    <strong>&nbsp; * </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div> -->
                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-4"></div>
                                                                                <div class="col-md-2">
                                                                                    <button type="submit" class="btn waves-effect waves-light btn-success">
                                                                                        Guardar
                                                                                        <i class="fa fa-save"></i>
                                                                                    </button>
                                                                                </div>

                                                                                <div class="col-md-2">
                                                                                    <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showVolverProyectosFuncion()">
                                                                                        <i class="fa fa-backward"></i>
                                                                                        Cancelar
                                                                                    </button>
                                                                                </div>
                                                                                <div class="col-md-4"></div>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- #endregion -->
                                                    </dx-scroll-view>
                                                </div>
                                            </dx-popup>
                                            <!-- #endregion -->



                                            <!-- #region documentación de proyecto -->
                                            <dx-popup [width]="900" [height]="700" [showTitle]="true" title="Documentación de proyecto" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="popupVisibleProyectoDocumento" (onHiding)="popupHidingProyectoDocumento($event)">
                                                <div *dxTemplate="let data of 'content'">
                                                    <dx-scroll-view width="100%" height="100%">
                                                        <!-- #region Formulario Proyecto Función -->
                                                        <div class="col-12">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div *ngIf="popupVisibleProyectoDocumento">
                                                                        <form ngNativeValidate #formCcDocumento="ngForm" (ngSubmit)="onSubmitProyectoDocumento(formCcDocumento.valid)">
                                                                            <div class="activity-box m-t-30">
                                                                                <div class="date-devider">
                                                                                    <span>
                                                                                        Documentación del
                                                                                        proyecto
                                                                                    </span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-sm-12 col-xs-12">
                                                                                    <div class="form-group">
                                                                                        <label for="exampleInputuname">Carácter de la entidad</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-agenda"></i>
                                                                                            </div>
                                                                                            <select name="DocumentoCaracterEntidadId" class="form-control" (change)="cargarTipoDocumentos()" [(ngModel)]="documento.DocumentoCaracterEntidadId" required>
                                                                                                <option value="">-- Seleccione --</option>
                                                                                                <option *ngFor="let item of caracterLista"
                                                                                                    [ngValue]="item.idValorReferencia">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>

                                                                                            <div style="color: red" *ngIf="entidad.TipoIdentificacionId === null">
                                                                                                <strong>&nbsp; * </strong>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-sm-12 col-xs-12">
                                                                                    <div class="form-group">
                                                                                        <label for="exampleInputuname">Tipo de documento</label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-agenda"></i>
                                                                                            </div>
                                                                                            <select name="TipoDocumento" class="form-control" [(ngModel)]="documento.ProyectoTipoDocumentoId" (change)="mostrarDescripcionDocumento()" required>
                                                                                                <option value="">-- Seleccione --</option>
                                                                                                <option *ngFor="let item of listaProyectoTipoDocumento"
                                                                                                    [ngValue]="item.idValorReferencia">
                                                                                                    {{ item.nombre }}
                                                                                                </option>
                                                                                            </select>
                                                                                            <div style="color: red" *ngIf="documento.ProyectoTipoDocumentoId === null">
                                                                                                <strong>&nbsp; * </strong>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <h5>Descripción del Documento</h5>
                                                                                        <label for="exampleInputuname">{{descripcionDocumento}}</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <label for="DocumentoProyectoNombre">
                                                                                            Documento
                                                                                        </label>
                                                                                        <div class="input-group">
                                                                                            <div class="input-group-addon">
                                                                                                <i class="ti-user"></i>
                                                                                            </div>
                                                                                            <input name="DocumentoProyectoNombre" id="DocumentoProyectoNombre" type="text" class="form-control" placeholder="Nombre del proyecto" [(ngModel)]="documento.DocumentoProyectoNombre" #DocumentoProyectoNombreControl="ngModel" required />
                                                                                            <ng-container *ngIf="!DocumentoProyectoNombreControl.valid && DocumentoProyectoNombreControl.touched">
                                                                                                <div style="color: red" *ngIf="DocumentoProyectoNombreControl.errors.required" class="error-message">
                                                                                                    <strong>&nbsp; *
                                                                                                    </strong>
                                                                                                </div>
                                                                                            </ng-container>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col">
                                                                                    <div class="widget-container">
                                                                                        <div class="col-md-12">
                                                                                            <div class="form-group">
                                                                                                <label for="exampleInputuname">Archivo
                                                                                                    documento</label>
                                                                                                <div class="input-group">
                                                                                                    <dx-file-uploader #fileUploaderDocumento uploadUrl="{{ urlDocumento }}" required [multiple]="false" accept="*" [(value)]="valueProyectoDocumento" uploadMode="useButtons" labelText="o arrastrar archivo" selectButtonText="Seleccionar archivo" (onValueChanged)="addIdParameterPdfDocumento($event)"
                                                                                                        uploadButtonText="Subir Archivo" readyToUploadMessage="Listo para subir" uploadFailedMessage="Ocurrio un error al subir el archivo" (onUploaded)="subidaCompletaPdfDocumento($event)"
                                                                                                        [allowedFileExtensions]="['.pdf']" [maxFileSize]="4000000">
                                                                                                    </dx-file-uploader>
                                                                                                </div>
                                                                                                <span class="note">Extensiones
                                                                                                    Permitidas:
                                                                                                    <span>.pdf</span>.</span>
                                                                                                <span class="note">Tamaño
                                                                                                    maximo: <span>4
                                                                                                        MB</span>.</span>

                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col">
                                                                                        <button type="button" [ngClass]="documento.DocumentoProyectoNombre == ''? ocultoDocumento: ''" (click)="descargarArchivoDocumento(documento.DocumentoProyectoId)" class="btn btn-success waves-effect waves-light m-r-10">
                                                                                            <i
                                                                                                class="fa fa-download"></i>
                                                                                            Descargar Archivo
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col">
                                                                                    <div class="content">
                                                                                        <div *ngIf="value.length > 0">
                                                                                            <h4>Selected Files</h4>
                                                                                        </div>
                                                                                        <div *ngFor="let file of value">
                                                                                            <div class="selected-item">
                                                                                                Name:
                                                                                                <span>{{file.name}}</span><br /> Size:
                                                                                                <span>{{file.size}}</span>bytes<br /> Type:
                                                                                                <span>{{file.type}}</span><br /> Last Modified Date:
                                                                                                <span>{{file.lastModifiedDate}}</span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-12">
                                                                                    <div class="form-group">
                                                                                        <label>Observaciones de
                                                                                            revisión</label>
                                                                                        <textarea class="form-control" rows="5" name="ObservacionesRevision" maxlength="3000" [(ngModel)]="documento.DocumentoProyectoObservacionesRevision" #ObservacionesRevisionControl="ngModel" required>
                                                                                                                                </textarea>
                                                                                        <ng-container *ngIf="!ObservacionesRevisionControl.valid && ObservacionesRevisionControl.touched">
                                                                                            <div style="color: red; font-size: 14px" *ngIf="ObservacionesRevisionControl.errors.required" class="error-message">
                                                                                                <p size="6">* Este campo es requerido</p>
                                                                                            </div>
                                                                                        </ng-container>

                                                                                        <div style="color: red; font-size: 14px;" *ngIf="documento.DocumentoProyectoObservacionesRevision.length >= 3000" class="error-message">
                                                                                            <p>* Máximo caracteres permitidos {{ documento.DocumentoProyectoObservacionesRevision.length }}
                                                                                            </p>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                            </div>

                                                                            <div class="row p-t-20">
                                                                                <div class="col-md-4"></div>
                                                                                <div class="col-md-2">
                                                                                    <button type="submit" class="btn waves-effect waves-light btn-success">
                                                                                        Guardar
                                                                                        <i class="fa fa-save"></i>
                                                                                    </button>
                                                                                </div>

                                                                                <div class="col-md-2">
                                                                                    <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showVolverProyectoDocumento()">
                                                                                        <i class="fa fa-backward"></i>
                                                                                        Cancelar
                                                                                    </button>
                                                                                </div>
                                                                                <div class="col-md-4"></div>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- #endregion -->
                                                    </dx-scroll-view>
                                                </div>
                                            </dx-popup>
                                            <!-- #endregion -->

                                        </div>
                                        <!-- #endregion -->

                                        <!-- #region Botones guardar o cancelar de salas de teatro -->
                                        <div class="row p-t-20">
                                            <div class="col-md-4"></div>
                                            <div class="col-md-2">
                                                <button type="submit" class="btn waves-effect waves-light btn-success">
                                                    Guardar
                                                    <i class="fa fa-save"></i>
                                                </button>
                                            </div>

                                            <div class="col-md-2">
                                                <button type="button" class="btn waves-effect waves-light btn-danger" (click)="showPanelEntidadSalas('V')">
                                                    <i class="fa fa-backward"></i>
                                                    Cancelar
                                                </button>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                        <!-- #endregion -->

                                        <div class="activity-box m-t-30">
                                            <div class="date-devider">
                                                <span>Fin Sala de teatro</span>
                                            </div>
                                        </div>
                                        <hr />
                                    </form>
                                </div>
                                <!-- #endregion -->
                            </div>
                        </div>
                    </div>
                    <!-- #endregion -->
                    <!-- #region Botones anterior y siguiente -->

                    <div class="actions">
                        <div class="row p-t-20">
                            <div class="col-md-4"></div>
                            <div class="col-md-2">
                                <button type="button" class="btn waves-effect waves-light btn-info" (click)="showPanel2('R')">
                                    <i class="fa fa-arrow-left"></i>
                                    Anterior
                                </button>
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn waves-effect waves-light btn-info" (click)="showPanel2('O')">
                                    Siguiente
                                    <i class="fa fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="activity-box m-t-30">
                            <div class="date-devider"></div>
                        </div>
                    </div>
                    <br />
                    <!-- #endregion -->
                </div>
            </div>
            <!-- #region botones regresar y Crear nueva entidad -->
            <div class="row p-t-20">
                <div class="col-md-3"></div>
                <div class="col-md-2">
                    <button type="button" class="btn waves-effect waves-light btn-primary" (click)="showPanel('V', '2')">
                        <i class="fa fa-arrow-left"></i>
                        Regresar al Listado
                    </button>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-2">
                    <button type="button" (click)="showPanel('C')" class="btn btn-primary m-b-0 button-tabla">
                        <i class="fa fa-plus"></i>
                        Crear nuevo Entidad
                    </button>
                </div>
                <div class="col-md-4"></div>
            </div>
            <!-- #endregion -->
        </div>
    </div>
</div>